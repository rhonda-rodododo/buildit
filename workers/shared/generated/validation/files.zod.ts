/**
 * @generated from protocol/schemas/modules/files/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Files module
 */

import { z } from "zod";

/** A shared file with metadata */
export const FileSchema = z
  .object({
    /** Schema version */
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    /** Unique file identifier */
    id: z.string().uuid(),
    /** File name with extension */
    name: z.string().max(256),
    /** File URL (may be encrypted) */
    url: z.string().url().max(2048),
    /** MIME type of the file */
    mimeType: z.string(),
    /** File size in bytes */
    size: z.number().int().gte(0),
    /** SHA-256 hash of file content */
    hash: z.string().regex(new RegExp("^[0-9a-f]{64}$")).optional(),
    /** Optional file description */
    description: z.string().max(1024).optional(),
    /** Parent folder ID */
    folderId: z.string().uuid().optional(),
    /** Associated group ID */
    groupId: z.string().optional(),
    visibility: z.enum(["private", "group", "public"]).default("group"),
    /** Whether file content is encrypted */
    encrypted: z.boolean().default(true),
    /** Key ID used for encryption */
    encryptionKeyId: z.string().optional(),
    /** Thumbnail URL for images/videos */
    thumbnail: z.string().url().optional(),
    /** Dimensions for image/video files */
    dimensions: z
      .object({
        width: z.number().int().optional(),
        height: z.number().int().optional(),
      })
      .optional(),
    /** Duration in seconds for audio/video */
    duration: z.number().optional(),
    /** Uploader's public key */
    uploadedBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    /** Upload timestamp (Unix seconds) */
    uploadedAt: z.number().int(),
  })
  .passthrough();
export type File = z.infer<typeof FileSchema>;

/** A folder for organizing files */
export const FolderSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    name: z.string().max(256),
    /** Parent folder ID for nesting */
    parentId: z.string().uuid().optional(),
    groupId: z.string().optional(),
    /** Folder color for UI */
    color: z.string().regex(new RegExp("^#[0-9A-Fa-f]{6}$")).optional(),
    createdBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    createdAt: z.number().int(),
  })
  .passthrough();
export type Folder = z.infer<typeof FolderSchema>;

/** File sharing permission */
export const FileShareSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    fileId: z.string().uuid(),
    /** Recipient's public key */
    sharedWith: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    permission: z.enum(["view", "download", "edit"]).default("view"),
    /** Share expiration timestamp */
    expiresAt: z.number().int().optional(),
    sharedBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    sharedAt: z.number().int(),
  })
  .passthrough();
export type FileShare = z.infer<typeof FileShareSchema>;

/** Module version */
export const FILES_SCHEMA_VERSION = "1.0.0" as const;
