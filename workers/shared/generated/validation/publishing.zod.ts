/**
 * @generated from protocol/schemas/modules/publishing/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Publishing module
 */

import { z } from "zod";

export const SEOMetadataSchema = z.object({
  metaTitle: z.string().max(60).optional(),
  metaDescription: z.string().max(160).optional(),
  ogImage: z.string().url().optional(),
  keywords: z.array(z.string()).max(10).optional(),
});
export type SEOMetadata = z.infer<typeof SEOMetadataSchema>;

/** A published article or blog post */
export const ArticleSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    title: z.string().max(512),
    /** URL-friendly identifier */
    slug: z.string().regex(new RegExp("^[a-z0-9-]+$")).max(256).optional(),
    subtitle: z.string().max(512).optional(),
    /** Article content (markdown) */
    content: z.string().max(1048576),
    /** Short preview text */
    excerpt: z.string().max(1024).optional(),
    coverImage: z.string().url().optional(),
    tags: z.array(z.string().max(64)).max(10).optional(),
    categories: z.array(z.string().max(64)).max(5).optional(),
    status: z.enum(["draft", "published", "archived"]).default("draft"),
    visibility: z.enum(["private", "group", "public"]).default("public"),
    groupId: z.string().optional(),
    /** Publication timestamp */
    publishedAt: z.number().int().optional(),
    authorPubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    authorName: z.string().max(128).optional(),
    coauthors: z
      .array(z.string().regex(new RegExp("^[0-9a-f]{64}$")))
      .optional(),
    /** Estimated reading time in minutes */
    readingTime: z.number().int().optional(),
    viewCount: z.number().int().default(0),
    /** Original URL if cross-posted */
    canonicalUrl: z.string().url().optional(),
    seo: SEOMetadataSchema.optional(),
    /** Signal-style encrypted link previews for URLs in article content */
    linkPreviews: z.array(z.unknown()).max(10).optional(),
    createdAt: z.number().int(),
    updatedAt: z.number().int().optional(),
  })
  .passthrough();
export type Article = z.infer<typeof ArticleSchema>;

/** A comment on an article */
export const CommentSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    articleId: z.string().uuid(),
    /** Parent comment ID for replies */
    parentId: z.string().uuid().optional(),
    content: z.string().max(4096),
    authorPubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    authorName: z.string().max(128).optional(),
    /** Signal-style encrypted link previews for URLs in comment */
    linkPreviews: z.array(z.unknown()).max(10).optional(),
    createdAt: z.number().int(),
    updatedAt: z.number().int().optional(),
  })
  .passthrough();
export type Comment = z.infer<typeof CommentSchema>;

/** A publication or blog collection */
export const PublicationSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    name: z.string().max(128),
    description: z.string().max(2048).optional(),
    logo: z.string().url().optional(),
    coverImage: z.string().url().optional(),
    groupId: z.string().optional(),
    visibility: z.enum(["private", "group", "public"]).default("public"),
    editors: z.array(z.string().regex(new RegExp("^[0-9a-f]{64}$"))).optional(),
    ownerPubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    createdAt: z.number().int(),
  })
  .passthrough();
export type Publication = z.infer<typeof PublicationSchema>;

/** Module version */
export const PUBLISHING_SCHEMA_VERSION = "1.0.0" as const;
