/**
 * @generated from protocol/schemas/modules/messaging/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Messaging module
 */

import { z } from "zod";

/** Media attachment */
export const AttachmentSchema = z
  .object({
    type: z.enum(["image", "file", "audio", "video"]),
    /** Content URL or data URL */
    url: z.string().max(2048),
    mimeType: z.string().optional(),
    /** Size in bytes */
    size: z.number().int().optional(),
    /** Filename */
    name: z.string().max(256).optional(),
    dimensions: z
      .object({
        width: z.number().int().optional(),
        height: z.number().int().optional(),
      })
      .optional(),
    /** Duration in seconds (audio/video) */
    duration: z.number().optional(),
    /** BlurHash placeholder for images */
    blurhash: z.string().optional(),
    /** Thumbnail URL for video */
    thumbnail: z.string().optional(),
  })
  .passthrough();
export type Attachment = z.infer<typeof AttachmentSchema>;

/** Direct message content (sent via NIP-17 gift wrap) */
export const DirectMessageSchema = z
  .object({
    /** Schema version */
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    /** Message text content */
    content: z.string().max(65535),
    /** ID of message being replied to */
    replyTo: z.string().optional(),
    attachments: z.array(AttachmentSchema).max(10).optional(),
    /** Pubkeys of mentioned users */
    mentions: z
      .array(z.string().regex(new RegExp("^[0-9a-f]{64}$")))
      .optional(),
    /** Signal-style encrypted link previews */
    linkPreviews: z.array(z.unknown()).max(10).optional(),
  })
  .passthrough();
export type DirectMessage = z.infer<typeof DirectMessageSchema>;

/** Group message content */
export const GroupMessageSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    content: z.string().max(65535),
    /** Target group identifier */
    groupId: z.string(),
    /** Thread within group (optional) */
    threadId: z.string().optional(),
    replyTo: z.string().optional(),
    attachments: z.array(AttachmentSchema).max(10).optional(),
    mentions: z
      .array(z.string().regex(new RegExp("^[0-9a-f]{64}$")))
      .optional(),
    /** Signal-style encrypted link previews */
    linkPreviews: z.array(z.unknown()).max(10).optional(),
  })
  .passthrough();
export type GroupMessage = z.infer<typeof GroupMessageSchema>;

/** Reaction to a message */
export const ReactionSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    /** Emoji character or shortcode */
    emoji: z.string().max(32),
    /** ID of message being reacted to */
    targetId: z.string(),
  })
  .passthrough();
export type Reaction = z.infer<typeof ReactionSchema>;

/** Read receipt for messages */
export const ReadReceiptSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    /** ID of last read message */
    lastRead: z.string(),
    /** DM partner pubkey or group ID */
    conversationId: z.string(),
    /** Unix timestamp */
    readAt: z.number().int().optional(),
  })
  .passthrough();
export type ReadReceipt = z.infer<typeof ReadReceiptSchema>;

/** Ephemeral typing indicator */
export const TypingIndicatorSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    typing: z.boolean(),
    conversationId: z.string(),
  })
  .passthrough();
export type TypingIndicator = z.infer<typeof TypingIndicatorSchema>;

/** Module version */
export const MESSAGING_SCHEMA_VERSION = "1.0.0" as const;
