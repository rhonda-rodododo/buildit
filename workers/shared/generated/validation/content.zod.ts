/**
 * @generated from protocol/schemas/modules/content/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Content module
 */

import { z } from "zod";

/** Privacy-preserving link preview (Signal-style). Sender fetches OG metadata + thumbnail, encrypts with content. Recipients see static previews — zero third-party requests. */
export const LinkPreviewSchema = z
  .object({
    /** Original URL */
    url: z.string().max(2048),
    /** Open Graph og:title */
    title: z.string().max(512).optional(),
    /** Open Graph og:description */
    description: z.string().max(1024).optional(),
    /** Open Graph og:site_name */
    siteName: z.string().max(256).optional(),
    /** Base64-encoded thumbnail (max ~50KB, encrypted with content) */
    imageData: z.string().optional(),
    /** MIME type (image/jpeg, image/png, image/webp) */
    imageType: z.string().max(64).optional(),
    /** Image width in pixels */
    imageWidth: z.number().int().gte(0).optional(),
    /** Image height in pixels */
    imageHeight: z.number().int().gte(0).optional(),
    /** Base64-encoded favicon (max ~10KB) */
    faviconData: z.string().optional(),
    /** Favicon MIME type */
    faviconType: z.string().max(64).optional(),
    /** Unix timestamp when preview was generated */
    fetchedAt: z.number().int(),
    /** Who fetched the preview — sender (direct) or proxy (API worker) */
    fetchedBy: z.enum(["sender", "proxy"]),
  })
  .passthrough();
export type LinkPreview = z.infer<typeof LinkPreviewSchema>;

/** oEmbed/secure embed metadata for rich media (videos, audio, code snippets). Used for privacy-respecting iframe embeds. */
export const EmbedInfoSchema = z
  .object({
    /** Original content URL */
    url: z.string().max(2048),
    /** Provider ID (youtube, vimeo, spotify, soundcloud, etc.) */
    provider: z.string().max(64),
    /** Privacy-respecting embed URL (e.g. youtube-nocookie.com) */
    embedUrl: z.string().max(2048).optional(),
    /** Content title from oEmbed response */
    title: z.string().max(512).optional(),
    /** Base64-encoded thumbnail image */
    thumbnailData: z.string().optional(),
    /** Thumbnail MIME type */
    thumbnailType: z.string().max(64).optional(),
    /** Embed width in pixels */
    width: z.number().int().default(640),
    /** Embed height in pixels */
    height: z.number().int().default(360),
  })
  .passthrough();
export type EmbedInfo = z.infer<typeof EmbedInfoSchema>;

/** Module version */
export const CONTENT_SCHEMA_VERSION = "1.0.0" as const;
