/**
 * @generated from protocol/schemas/modules/crm/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Crm module
 */

import { z } from "zod";

export const AddressSchema = z.object({
  street: z.string().max(256).optional(),
  city: z.string().max(128).optional(),
  state: z.string().max(64).optional(),
  postalCode: z.string().max(32).optional(),
  country: z.string().max(64).optional(),
});
export type Address = z.infer<typeof AddressSchema>;

/** A contact entry in the CRM */
export const ContactSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    /** Nostr pubkey if contact is a BuildIt user */
    pubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")).optional(),
    name: z.string().max(256).optional(),
    email: z.string().email().optional(),
    phone: z.string().max(32).optional(),
    address: AddressSchema.optional(),
    organization: z.string().max(256).optional(),
    /** Job title or role */
    title: z.string().max(128).optional(),
    /** Tags for categorization (e.g., 'volunteer', 'donor') */
    tags: z.array(z.string().max(64)).max(50).optional(),
    /** How this contact was acquired */
    source: z.string().max(128).optional(),
    notes: z.string().max(8192).optional(),
    /** Custom field values */
    customFields: z.record(z.string(), z.any()).optional(),
    groupId: z.string().optional(),
    status: z.enum(["active", "inactive", "archived"]).default("active"),
    /** Last interaction timestamp */
    lastContactedAt: z.number().int().optional(),
    createdBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    createdAt: z.number().int(),
    updatedAt: z.number().int().optional(),
  })
  .passthrough();
export type Contact = z.infer<typeof ContactSchema>;

/** A logged interaction with a contact */
export const InteractionSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    contactId: z.string().uuid(),
    type: z.enum([
      "call",
      "email",
      "meeting",
      "text",
      "event",
      "note",
      "other",
    ]),
    summary: z.string().max(512).optional(),
    notes: z.string().max(8192).optional(),
    /** Result of the interaction */
    outcome: z.string().max(256).optional(),
    /** Scheduled follow-up timestamp */
    followUpDate: z.number().int().optional(),
    occurredAt: z.number().int(),
    loggedBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
  })
  .passthrough();
export type Interaction = z.infer<typeof InteractionSchema>;

/** A task related to a contact */
export const TaskSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    contactId: z.string().uuid().optional(),
    title: z.string().max(256),
    description: z.string().max(2048).optional(),
    dueAt: z.number().int().optional(),
    priority: z.enum(["low", "medium", "high", "urgent"]).default("medium"),
    status: z
      .enum(["pending", "in_progress", "completed", "cancelled"])
      .default("pending"),
    assignedTo: z.string().regex(new RegExp("^[0-9a-f]{64}$")).optional(),
    completedAt: z.number().int().optional(),
    createdBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    createdAt: z.number().int(),
  })
  .passthrough();
export type Task = z.infer<typeof TaskSchema>;

/** Module version */
export const CRM_SCHEMA_VERSION = "1.0.0" as const;
