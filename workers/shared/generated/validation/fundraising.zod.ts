/**
 * @generated from protocol/schemas/modules/fundraising/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Fundraising module
 */

import { z } from "zod";

export const DonationTierSchema = z.object({
  amount: z.number().gte(0),
  name: z.string().max(64).optional(),
  description: z.string().max(256).optional(),
  perks: z.array(z.string()).optional(),
});
export type DonationTier = z.infer<typeof DonationTierSchema>;

export const CampaignUpdateSchema = z.object({
  content: z.string().max(4096),
  postedAt: z.number().int(),
});
export type CampaignUpdate = z.infer<typeof CampaignUpdateSchema>;

/** A fundraising campaign */
export const CampaignSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    title: z.string().max(256),
    description: z.string().max(8192).optional(),
    /** Target amount to raise */
    goal: z.number().gte(0),
    /** ISO 4217 currency code */
    currency: z.string().regex(new RegExp("^[A-Z]{3}$")),
    /** Amount raised so far */
    raised: z.number().gte(0).default(0),
    donorCount: z.number().int().gte(0).default(0),
    /** Campaign start timestamp */
    startsAt: z.number().int().optional(),
    /** Campaign end timestamp */
    endsAt: z.number().int().optional(),
    status: z
      .enum(["draft", "active", "paused", "completed", "cancelled"])
      .default("draft"),
    visibility: z.enum(["private", "group", "public"]).default("group"),
    groupId: z.string().optional(),
    /** Campaign cover image */
    image: z.string().url().optional(),
    /** Suggested donation amounts */
    tiers: z.array(DonationTierSchema).optional(),
    updates: z.array(CampaignUpdateSchema).optional(),
    createdBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    createdAt: z.number().int(),
    updatedAt: z.number().int().optional(),
  })
  .passthrough();
export type Campaign = z.infer<typeof CampaignSchema>;

/** A donation to a campaign */
export const DonationSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    campaignId: z.string().uuid(),
    amount: z.number().gte(0),
    currency: z.string().regex(new RegExp("^[A-Z]{3}$")),
    /** Donor pubkey (null if anonymous) */
    donorPubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")).optional(),
    /** Display name for donation */
    donorName: z.string().max(128).optional(),
    anonymous: z.boolean().default(false),
    /** Optional message with donation */
    message: z.string().max(500).optional(),
    /** Selected donation tier */
    tierId: z.string().optional(),
    paymentMethod: z
      .enum(["card", "bank", "crypto", "cash", "check", "other"])
      .optional(),
    status: z
      .enum(["pending", "completed", "failed", "refunded"])
      .default("completed"),
    donatedAt: z.number().int(),
  })
  .passthrough();
export type Donation = z.infer<typeof DonationSchema>;

/** An expense against campaign funds */
export const ExpenseSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    campaignId: z.string().uuid(),
    amount: z.number().gte(0),
    currency: z.string().regex(new RegExp("^[A-Z]{3}$")),
    description: z.string().max(512),
    category: z.string().max(64).optional(),
    /** Receipt file URL */
    receipt: z.string().url().optional(),
    vendor: z.string().max(128).optional(),
    /** Expense date */
    date: z.number().int().optional(),
    recordedBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    recordedAt: z.number().int(),
  })
  .passthrough();
export type Expense = z.infer<typeof ExpenseSchema>;

/** Module version */
export const FUNDRAISING_SCHEMA_VERSION = "1.0.0" as const;
