/**
 * @generated from protocol/schemas/modules/custom-fields/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the CustomFields module
 */

import { z } from "zod";

/** Type of the field */
export const FieldTypeSchema = z.enum([
  "text",
  "textarea",
  "number",
  "currency",
  "date",
  "datetime",
  "time",
  "select",
  "multiselect",
  "checkbox",
  "toggle",
  "radio",
  "file",
  "image",
  "url",
  "email",
  "phone",
  "location",
  "relationship",
  "user",
  "color",
  "rating",
  "slider",
  "tags",
]);
export type FieldType = z.infer<typeof FieldTypeSchema>;

/** A choice option for select/multiselect/radio fields */
export const FieldChoiceSchema = z.object({
  /** Internal value */
  value: z.string(),
  /** Display label */
  label: z.string(),
  /** Optional color for the choice */
  color: z.string().optional(),
  /** Optional icon identifier */
  icon: z.string().optional(),
  /** Display order */
  order: z.number().int().optional(),
});
export type FieldChoice = z.infer<typeof FieldChoiceSchema>;

/** Type-specific configuration options */
export const FieldOptionsSchema = z.object({
  /** Options for select/multiselect/radio fields */
  choices: z.array(FieldChoiceSchema).optional(),
  /** Minimum value for number/slider fields */
  min: z.number().optional(),
  /** Maximum value for number/slider fields */
  max: z.number().optional(),
  /** Step value for number/slider fields */
  step: z.number().optional(),
  /** Minimum length for text fields */
  minLength: z.number().int().gte(0).optional(),
  /** Maximum length for text fields */
  maxLength: z.number().int().gte(1).optional(),
  /** Placeholder text for input fields */
  placeholder: z.string().optional(),
  /** Prefix for display (e.g., currency symbol) */
  prefix: z.string().optional(),
  /** Suffix for display (e.g., unit) */
  suffix: z.string().optional(),
  /** Allow multiple file uploads */
  allowMultiple: z.boolean().default(false),
  /** Accepted MIME types for file fields */
  acceptedTypes: z.array(z.string()).optional(),
  /** Maximum file size in bytes */
  maxFileSize: z.number().int().optional(),
  /** Target module for relationship fields */
  relationshipModule: z.string().optional(),
  /** Type of relationship */
  relationshipType: z
    .enum(["one-to-one", "one-to-many", "many-to-many"])
    .optional(),
  /** Maximum rating value */
  maxRating: z.number().int().gte(1).lte(10).default(5),
  /** Color format for color fields */
  colorFormat: z.enum(["hex", "rgb", "hsl"]).default("hex"),
  /** Default location precision for location fields. Neighborhood is recommended for privacy. */
  defaultPrecision: z
    .enum(["exact", "neighborhood", "city", "region"])
    .default("neighborhood"),
  /** Whether 'exact' precision is available. Disabled by default for safety. */
  allowExactLocation: z.boolean().default(false),
  /** Whether to show an inline map preview for location fields */
  showMapPreview: z.boolean().default(true),
});
export type FieldOptions = z.infer<typeof FieldOptionsSchema>;

/** Validation rules for the field */
export const FieldValidationSchema = z.object({
  /** Regex pattern for text validation */
  pattern: z.string().optional(),
  /** Custom error message for pattern validation */
  patternMessage: z.string().optional(),
  /** Custom validation function name */
  customValidation: z.string().optional(),
});
export type FieldValidation = z.infer<typeof FieldValidationSchema>;

/** Definition of a custom field */
export const FieldDefinitionSchema = z.object({
  /** Schema version for graceful degradation */
  _v: z.string().default("1.0.0"),
  /** Unique identifier for the field */
  id: z.string().uuid(),
  /** Display name for the field */
  name: z.string().min(1).max(100),
  type: FieldTypeSchema,
  /** Whether the field is required */
  required: z.boolean().default(false),
  /** Help text for the field */
  description: z.string().max(500).optional(),
  /** Default value for the field */
  defaultValue: z.any().optional(),
  options: FieldOptionsSchema.optional(),
  validation: FieldValidationSchema.optional(),
  /** Display order of the field */
  order: z.number().int().gte(0).optional(),
  /** Group that owns this field definition */
  groupId: z.string().uuid().optional(),
  /** Module this field belongs to (events, mutual-aid, etc.) */
  moduleId: z.string().optional(),
  /** Unix timestamp of creation */
  createdAt: z.number().int().optional(),
  /** Unix timestamp of last update */
  updatedAt: z.number().int().optional(),
});
export type FieldDefinition = z.infer<typeof FieldDefinitionSchema>;

/** Structured location value stored by location fields */
export const LocationValueSchema = z.object({
  /** Latitude in decimal degrees */
  lat: z.number().gte(-90).lte(90),
  /** Longitude in decimal degrees */
  lng: z.number().gte(-180).lte(180),
  /** Human-readable location label (address, place name, etc.) */
  label: z.string().max(500),
  /** Privacy precision level. Controls how precisely the location is shared. */
  precision: z
    .enum(["exact", "neighborhood", "city", "region"])
    .default("neighborhood"),
});
export type LocationValue = z.infer<typeof LocationValueSchema>;

/** A stored field value */
export const FieldValueSchema = z.object({
  /** Schema version */
  _v: z.string().default("1.0.0"),
  /** Reference to the field definition */
  fieldId: z.string().uuid(),
  /** Entity this value belongs to (event, request, etc.) */
  entityId: z.string().uuid(),
  /** Type of entity (event, aid-request, etc.) */
  entityType: z.string(),
  /** The actual value (type depends on field type) */
  value: z.any(),
  /** Unix timestamp of creation */
  createdAt: z.number().int().optional(),
  /** Unix timestamp of last update */
  updatedAt: z.number().int().optional(),
});
export type FieldValue = z.infer<typeof FieldValueSchema>;

/** A reusable template of field definitions */
export const FieldTemplateSchema = z.object({
  /** Schema version */
  _v: z.string().default("1.0.0"),
  id: z.string().uuid(),
  /** Template name */
  name: z.string(),
  /** Template description */
  description: z.string().optional(),
  /** Template category (events, mutual-aid, etc.) */
  category: z.string(),
  /** Field definitions in this template */
  fields: z.array(FieldDefinitionSchema),
  /** Whether this is a system-provided template */
  isBuiltIn: z.boolean().default(false),
  /** Hex public key of creator */
  createdBy: z.string().optional(),
  createdAt: z.number().int().optional(),
});
export type FieldTemplate = z.infer<typeof FieldTemplateSchema>;

/** Module version */
export const CUSTOM_FIELDS_SCHEMA_VERSION = "1.0.0" as const;
