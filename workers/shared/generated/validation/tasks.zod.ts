/**
 * @generated from protocol/schemas/modules/tasks/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Tasks module
 */

import { z } from "zod";

/** Status of a task */
export const TaskStatusSchema = z.enum([
  "todo",
  "in_progress",
  "done",
  "cancelled",
]);
export type TaskStatus = z.infer<typeof TaskStatusSchema>;

/** Priority level for tasks */
export const TaskPrioritySchema = z.enum(["low", "medium", "high", "urgent"]);
export type TaskPriority = z.infer<typeof TaskPrioritySchema>;

/** A checklist item within a task */
export const ChecklistItemSchema = z
  .object({
    id: z.string(),
    label: z.string().max(256),
    completed: z.boolean().default(false),
    order: z.number().int().default(0),
  })
  .passthrough();
export type ChecklistItem = z.infer<typeof ChecklistItemSchema>;

/** A task with assignment, priority, and status tracking */
export const TaskSchema = z
  .object({
    _v: z.string().regex(new RegExp("^\\d+\\.\\d+\\.\\d+$")),
    id: z.string().uuid(),
    /** Group this task belongs to */
    groupId: z.string(),
    title: z.string().max(256),
    description: z.string().max(4096).optional(),
    status: TaskStatusSchema.optional(),
    priority: TaskPrioritySchema.optional(),
    /** Public key of assigned person */
    assigneePubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")).optional(),
    createdBy: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    /** Unix timestamp of due date */
    dueDate: z.number().int().optional(),
    /** Unix timestamp of completion */
    completedAt: z.number().int().optional(),
    tags: z.array(z.string()).optional(),
    checklist: z.array(ChecklistItemSchema).optional(),
    /** Parent task for subtask relationships */
    parentTaskId: z.string().optional(),
    sortOrder: z.number().int().default(0),
    createdAt: z.number().int(),
    updatedAt: z.number().int().optional(),
  })
  .passthrough();
export type Task = z.infer<typeof TaskSchema>;

/** Module version */
export const TASKS_SCHEMA_VERSION = "1.0.0" as const;
