/**
 * @generated from protocol/schemas/modules/contacts/v1.json
 * @version 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen
 * Zod validation schemas for the Contacts module
 */

import { z } from "zod";

/** Type of relationship with a contact */
export const RelationshipTypeSchema = z.enum([
  "following",
  "follower",
  "friend",
  "blocked",
]);
export type RelationshipType = z.infer<typeof RelationshipTypeSchema>;

/** Predefined contact tags for organizing */
export const PredefinedTagSchema = z.enum([
  "volunteer",
  "member",
  "leader",
  "media_contact",
  "ally",
  "potential",
  "inactive",
  "union_rep",
  "steward",
  "donor",
]);
export type PredefinedTag = z.infer<typeof PredefinedTagSchema>;

/** Category for contact notes */
export const NoteCategorySchema = z.enum([
  "general",
  "meeting",
  "follow_up",
  "concern",
  "positive",
  "task",
]);
export type NoteCategory = z.infer<typeof NoteCategorySchema>;

/** Metadata for a contact (NIP-02 derived) */
export const ContactMetadataSchema = z
  .object({
    _v: z.string().default("1.0.0"),
    pubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    relay: z.string().optional(),
    petname: z.string().optional(),
    displayName: z.string().optional(),
    avatar: z.string().url().optional(),
    bio: z.string().optional(),
    nip05: z.string().optional(),
    /** Lightning address */
    lud16: z.string().optional(),
  })
  .passthrough();
export type ContactMetadata = z.infer<typeof ContactMetadataSchema>;

/** A contact with relationship information */
export const ContactSchema = z
  .object({
    _v: z.string().default("1.0.0"),
    pubkey: z.string().regex(new RegExp("^[0-9a-f]{64}$")),
    relay: z.string().optional(),
    petname: z.string().optional(),
    displayName: z.string().optional(),
    avatar: z.string().url().optional(),
    bio: z.string().optional(),
    nip05: z.string().optional(),
    lud16: z.string().optional(),
    relationship: RelationshipTypeSchema,
    followedAt: z.number().int().optional(),
    mutedAt: z.number().int().optional(),
    blockedAt: z.number().int().optional(),
  })
  .passthrough();
export type Contact = z.infer<typeof ContactSchema>;

/** A note attached to a contact */
export const ContactNoteSchema = z
  .object({
    _v: z.string().default("1.0.0"),
    id: z.string(),
    contactPubkey: z.string(),
    content: z.string().max(4096),
    category: NoteCategorySchema,
    createdAt: z.number().int(),
    updatedAt: z.number().int().optional(),
  })
  .passthrough();
export type ContactNote = z.infer<typeof ContactNoteSchema>;

/** A tag applied to a contact */
export const ContactTagSchema = z
  .object({
    _v: z.string().default("1.0.0"),
    contactPubkey: z.string(),
    tag: PredefinedTagSchema,
  })
  .passthrough();
export type ContactTag = z.infer<typeof ContactTagSchema>;

/** Module version */
export const CONTACTS_SCHEMA_VERSION = "1.0.0" as const;
