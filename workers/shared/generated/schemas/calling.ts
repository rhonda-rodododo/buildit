/**
 * @generated from protocol/schemas/modules/calling/v1.json
 * @version 1.0.0
 * @minReaderVersion 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype
 */

// Version constants
export const CALLING_VERSION = "1.0.0";
export const CALLING_MIN_READER_VERSION = "1.0.0";

/**
 * WebRTC call offer with SDP (wrapped in NIP-17)
 */
export interface CallOffer {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Unique identifier for this call session
   */
  callId: string;
  /**
   * Type of call being initiated
   */
  callType: CallType;
  capabilities?: CapabilitiesObject;
  /**
   * Optional group context for the call
   */
  groupId?: string;
  /**
   * Hotline ID if calling a hotline
   */
  hotlineId?: string;
  /**
   * True if this is a reconnection attempt
   */
  isReconnect?: boolean;
  /**
   * True if adding/removing tracks mid-call
   */
  isRenegotiation?: boolean;
  /**
   * Group call room ID for mesh/SFU
   */
  roomId?: string;
  /**
   * SDP offer (Session Description Protocol)
   */
  sdp: string;
  /**
   * Unix timestamp of offer creation
   */
  timestamp: number;
  [property: string]: any;
}

/**
 * Type of call being initiated
 */
export enum CallType {
  Video = "video",
  Voice = "voice",
}

/**
 * Caller capabilities
 */
export interface CapabilitiesObject {
  e2ee?: boolean;
  insertableStreams?: boolean;
  screenShare?: boolean;
  video?: boolean;
  [property: string]: any;
}

/**
 * WebRTC call answer with SDP
 */
export interface CallAnswer {
  _v: string;
  callId: string;
  /**
   * SDP answer
   */
  sdp: string;
  timestamp: number;
  [property: string]: any;
}

/**
 * ICE candidate for connection negotiation
 */
export interface CallIceCandidate {
  _v: string;
  callId: string;
  /**
   * RTCIceCandidate serialized
   */
  candidate: Candidate;
  [property: string]: any;
}

/**
 * RTCIceCandidate serialized
 */
export interface Candidate {
  candidate?: string;
  sdpMid?: string;
  sdpMLineIndex?: number;
  usernameFragment?: string;
  [property: string]: any;
}

/**
 * Call termination signal
 */
export interface CallHangup {
  _v: string;
  callId: string;
  /**
   * Reason for call termination
   */
  reason: Reason;
  timestamp?: number;
  [property: string]: any;
}

/**
 * Reason for call termination
 */
export enum Reason {
  Busy = "busy",
  Cancelled = "cancelled",
  Completed = "completed",
  NetworkFailure = "network_failure",
  NoAnswer = "no_answer",
  Rejected = "rejected",
  Timeout = "timeout",
}

/**
 * Caller capabilities
 */
export interface CallCapabilities {
  e2ee?: boolean;
  insertableStreams?: boolean;
  screenShare?: boolean;
  video?: boolean;
  [property: string]: any;
}

/**
 * Local call state tracking
 */
export interface CallState {
  _v: string;
  callId: string;
  callType?: CallType;
  /**
   * Unix timestamp when call connected
   */
  connectedAt?: number;
  direction: CallStateDirection;
  /**
   * Unix timestamp when call ended
   */
  endedAt?: number;
  endReason?: Reason;
  isEncrypted?: boolean;
  isMuted?: boolean;
  isScreenSharing?: boolean;
  isVideoEnabled?: boolean;
  quality?: QualityObject;
  /**
   * Display name of remote party
   */
  remoteName?: string;
  /**
   * Nostr pubkey of the other party
   */
  remotePubkey: string;
  /**
   * Unix timestamp when call was initiated
   */
  startedAt: number;
  state: CallStateState;
  [property: string]: any;
}

export enum CallStateDirection {
  Incoming = "incoming",
  Outgoing = "outgoing",
}

/**
 * Call quality metrics
 */
export interface QualityObject {
  /**
   * 0-1 normalized
   */
  audioLevel?: number;
  /**
   * Bits per second
   */
  bandwidth?: number;
  /**
   * Milliseconds
   */
  jitter?: number;
  /**
   * Percentage 0-100
   */
  packetLoss?: number;
  /**
   * Milliseconds
   */
  roundTripTime?: number;
  [property: string]: any;
}

export enum CallStateState {
  Connected = "connected",
  Connecting = "connecting",
  Ended = "ended",
  Initiating = "initiating",
  OnHold = "on_hold",
  Reconnecting = "reconnecting",
  Ringing = "ringing",
}

/**
 * Call quality metrics
 */
export interface CallQuality {
  /**
   * 0-1 normalized
   */
  audioLevel?: number;
  /**
   * Bits per second
   */
  bandwidth?: number;
  /**
   * Milliseconds
   */
  jitter?: number;
  /**
   * Percentage 0-100
   */
  packetLoss?: number;
  /**
   * Milliseconds
   */
  roundTripTime?: number;
  [property: string]: any;
}

/**
 * Create a new group call room
 */
export interface GroupCallCreate {
  _v: string;
  callType: CallType;
  createdBy: string;
  /**
   * BuildIt group context
   */
  groupId?: string;
  invitedPubkeys?: string[];
  maxParticipants?: number;
  roomId: string;
  timestamp: number;
  topology?: Topology;
  [property: string]: any;
}

export enum Topology {
  Mesh = "mesh",
  Sfu = "sfu",
}

/**
 * Join an existing group call
 */
export interface GroupCallJoin {
  _v: string;
  displayName?: string;
  pubkey: string;
  roomId: string;
  timestamp: number;
  [property: string]: any;
}

/**
 * Leave a group call
 */
export interface GroupCallLeave {
  _v: string;
  pubkey: string;
  roomId: string;
  timestamp: number;
  [property: string]: any;
}

/**
 * Participant in a group call
 */
export interface GroupCallParticipant {
  audioEnabled?: boolean;
  displayName?: string;
  isHost?: boolean;
  isSpeaking?: boolean;
  joinedAt: number;
  pubkey: string;
  screenSharing?: boolean;
  state: GroupCallParticipantState;
  videoEnabled?: boolean;
  [property: string]: any;
}

export enum GroupCallParticipantState {
  Connected = "connected",
  Connecting = "connecting",
  Left = "left",
  Reconnecting = "reconnecting",
}

/**
 * Distribute sender key for group E2EE
 */
export interface SenderKeyDistribution {
  _v: string;
  /**
   * Map of recipient pubkey to NIP-44 encrypted key
   */
  encryptedKeys: { [key: string]: string };
  /**
   * Key ID for rotation tracking
   */
  keyId: number;
  roomId: string;
  senderPubkey: string;
  timestamp?: number;
  [property: string]: any;
}

/**
 * Persistent call log entry
 */
export interface CallHistory {
  _v: string;
  callId: string;
  callType?: CallHistoryCallType;
  connectedAt?: number;
  direction: CallStateDirection;
  /**
   * Duration in seconds
   */
  duration?: number;
  endedAt?: number;
  endReason?: Reason;
  groupId?: string;
  /**
   * For group calls
   */
  participantCount?: number;
  remoteName?: string;
  remotePubkey: string;
  roomId?: string;
  startedAt: number;
  wasEncrypted?: boolean;
  [property: string]: any;
}

export enum CallHistoryCallType {
  Group = "group",
  Video = "video",
  Voice = "voice",
}

/**
 * User call preferences
 */
export interface CallSettings {
  _v?: string;
  allowUnknownCallers?: boolean;
  autoAnswer?: boolean;
  autoGainControl?: boolean;
  defaultCallType?: CallType;
  doNotDisturb?: boolean;
  echoCancellation?: boolean;
  noiseSuppression?: boolean;
  preferredAudioInput?: string;
  preferredAudioOutput?: string;
  preferredVideoInput?: string;
  /**
   * Always use TURN relay for privacy
   */
  relayOnlyMode?: boolean;
  [property: string]: any;
}

/**
 * Extended call state for hotline calls
 */
export interface HotlineCallState {
  _v: string;
  answeredAt?: number;
  caller?: Caller;
  callId: string;
  callType: HotlineCallStateCallType;
  category?: string;
  endedAt?: number;
  groupId?: string;
  hotlineId: string;
  isEncrypted?: boolean;
  notes?: string;
  operator?: Operator;
  priority?: HotlineCallStatePriority;
  queuedAt?: number;
  queuePosition?: number;
  state: HotlineCallStateState;
  /**
   * Seconds in queue
   */
  waitDuration?: number;
  [property: string]: any;
}

export enum HotlineCallStateCallType {
  Internal = "internal",
  Pstn = "pstn",
}

export interface Caller {
  name?: string;
  phone?: string;
  pubkey?: string;
  [property: string]: any;
}

export interface Operator {
  name?: string;
  pubkey?: string;
  [property: string]: any;
}

export enum HotlineCallStatePriority {
  High = "high",
  Low = "low",
  Medium = "medium",
  Urgent = "urgent",
}

export enum HotlineCallStateState {
  Abandoned = "abandoned",
  Active = "active",
  Completed = "completed",
  Escalated = "escalated",
  OnHold = "on_hold",
  Queued = "queued",
  Ringing = "ringing",
  Transferred = "transferred",
}

/**
 * Operator availability status
 */
export interface HotlineOperatorStatus {
  _v: string;
  callCount?: number;
  currentCallId?: string;
  hotlineId: string;
  pubkey: string;
  shiftEnd?: number;
  shiftStart?: number;
  status: HotlineOperatorStatusStatus;
  timestamp?: number;
  [property: string]: any;
}

export enum HotlineOperatorStatusStatus {
  Available = "available",
  Break = "break",
  Offline = "offline",
  OnCall = "on_call",
  WrapUp = "wrap_up",
}

/**
 * Current queue status for a hotline
 */
export interface HotlineQueueState {
  _v: string;
  calls: Call[];
  /**
   * Seconds
   */
  estimatedWaitTime?: number;
  hotlineId: string;
  operatorsAvailable?: number;
  timestamp?: number;
  [property: string]: any;
}

export interface Call {
  callerName?: string;
  callId?: string;
  position?: number;
  priority?: string;
  queuedAt?: number;
  [property: string]: any;
}

/**
 * Text-based hotline conversation thread
 */
export interface MessagingHotlineThread {
  _v: string;
  assignedOperator?: string;
  category?: string;
  contact?: Contact;
  createdAt: number;
  groupId?: string;
  hotlineId: string;
  lastMessageAt?: number;
  lastMessageBy?: LastMessageBy;
  /**
   * If escalated to voice
   */
  linkedCallId?: string;
  messageCount?: number;
  priority?: HotlineCallStatePriority;
  resolvedAt?: number;
  status: MessagingHotlineThreadStatus;
  threadId: string;
  unreadByOperator?: number;
  [property: string]: any;
}

export interface Contact {
  name?: string;
  phone?: string;
  pubkey?: string;
  type?: Type;
  [property: string]: any;
}

export enum Type {
  Buildit = "buildit",
  RCS = "rcs",
  SMS = "sms",
}

export enum LastMessageBy {
  Contact = "contact",
  Operator = "operator",
}

export enum MessagingHotlineThreadStatus {
  Active = "active",
  Archived = "archived",
  Assigned = "assigned",
  Resolved = "resolved",
  Unassigned = "unassigned",
  Waiting = "waiting",
}

/**
 * Message broadcast/blast
 */
export interface Broadcast {
  _v: string;
  analytics?: Analytics;
  broadcastId: string;
  content: string;
  createdBy: string;
  priority?: BroadcastPriority;
  scheduledAt?: number;
  sentAt?: number;
  status?: BroadcastStatus;
  targetIds?: string[];
  targetType: TargetType;
  title?: string;
  [property: string]: any;
}

export interface Analytics {
  delivered?: number;
  read?: number;
  replied?: number;
  totalRecipients?: number;
  [property: string]: any;
}

export enum BroadcastPriority {
  Emergency = "emergency",
  High = "high",
  Normal = "normal",
}

export enum BroadcastStatus {
  Draft = "draft",
  Failed = "failed",
  Scheduled = "scheduled",
  Sending = "sending",
  Sent = "sent",
}

export enum TargetType {
  ContactList = "contact_list",
  Emergency = "emergency",
  Group = "group",
  PublicChannel = "public_channel",
}

/**
 * SFU-based conference room
 */
export interface ConferenceRoom {
  _v: string;
  createdAt?: number;
  createdBy: string;
  expiresAt?: number;
  groupId?: string;
  maxParticipants?: number;
  name: string;
  roomId: string;
  settings?: ConferenceRoomSettings;
  sfuEndpoint?: string;
  [property: string]: any;
}

export interface ConferenceRoomSettings {
  allowRecording?: boolean;
  allowScreenShare?: boolean;
  e2eeRequired?: boolean;
  locked?: boolean;
  waitingRoom?: boolean;
  [property: string]: any;
}

/**
 * Breakout room configuration
 */
export interface BreakoutConfig {
  _v: string;
  allowSelfSelect?: boolean;
  autoAssign?: boolean;
  breakouts: Breakout[];
  createdAt?: number;
  createdBy?: string;
  /**
   * Seconds, 0 for unlimited
   */
  duration?: number;
  mainRoomId: string;
  [property: string]: any;
}

export interface Breakout {
  capacity?: number;
  id: string;
  name: string;
  participants?: string[];
  [property: string]: any;
}

/**
 * Participant in an SFU conference
 */
export interface ConferenceParticipant {
  audioEnabled?: boolean;
  displayName?: string;
  handRaised?: boolean;
  /**
   * Breakout room ID if in breakout
   */
  inBreakout?: string;
  inWaitingRoom?: boolean;
  joinedAt: number;
  pubkey: string;
  role: Role;
  screenSharing?: boolean;
  videoEnabled?: boolean;
  [property: string]: any;
}

export enum Role {
  CoHost = "co_host",
  Host = "host",
  Moderator = "moderator",
  Participant = "participant",
  Viewer = "viewer",
}

/**
 * MLS welcome message for new participants
 */
export interface MLSWelcome {
  _v: string;
  epoch?: number;
  roomId: string;
  targetPubkey: string;
  timestamp?: number;
  /**
   * Base64-encoded encrypted MLS welcome message
   */
  welcome: string;
  [property: string]: any;
}

/**
 * MLS commit for key rotation
 */
export interface MLSCommit {
  _v: string;
  /**
   * Base64-encoded MLS commit message
   */
  commit: string;
  epoch: number;
  roomId: string;
  senderPubkey?: string;
  timestamp?: number;
  [property: string]: any;
}

/**
 * Participant waiting to join conference
 */
export interface WaitingRoomParticipant {
  displayName?: string;
  joinedAt: number;
  pubkey: string;
  [property: string]: any;
}

/**
 * Hand raise event
 */
export interface HandRaise {
  _v: string;
  action: Action;
  pubkey: string;
  roomId: string;
  timestamp?: number;
  [property: string]: any;
}

export enum Action {
  Lower = "lower",
  Raise = "raise",
}

/**
 * Emoji reaction in conference
 */
export interface Reaction {
  _v: string;
  emoji: Emoji;
  pubkey: string;
  roomId: string;
  timestamp?: number;
  [property: string]: any;
}

export enum Emoji {
  Emoji = "\ud83d\udc4e",
  Empty = "\ud83d\udc4d",
  Fluffy = "\ud83d\ude02",
  Indecent = "✋",
  Indigo = "\ud83d\udc4f",
  Purple = "❤️",
  Sticky = "\ud83c\udf89",
  Tentacled = "\ud83d\ude2e",
}

/**
 * Conference poll
 */
export interface Poll {
  _v: string;
  closedAt?: number;
  createdAt?: number;
  createdBy: string;
  options: string[];
  pollId: string;
  question: string;
  results?: Result[];
  roomId: string;
  settings?: PollSettings;
  status?: PollStatus;
  [property: string]: any;
}

export interface Result {
  count?: number;
  option?: string;
  [property: string]: any;
}

export interface PollSettings {
  anonymous?: boolean;
  multiSelect?: boolean;
  showLiveResults?: boolean;
  [property: string]: any;
}

export enum PollStatus {
  Active = "active",
  Closed = "closed",
  Draft = "draft",
}

/**
 * Vote on a poll
 */
export interface PollVote {
  _v: string;
  /**
   * Encrypted vote with voter token for anonymity
   */
  encryptedVote: string;
  pollId: string;
  roomId: string;
  timestamp?: number;
  /**
   * HMAC(roomId + pollId, privateKey) for anonymous deduplication
   */
  voterToken?: string;
  [property: string]: any;
}

/**
 * Recording consent from participant
 */
export interface RecordingConsent {
  _v: string;
  consented: boolean;
  pubkey: string;
  roomId: string;
  timestamp?: number;
  [property: string]: any;
}

/**
 * In-conference chat message
 */
export interface ConferenceChatMessage {
  _v: string;
  content: string;
  messageId: string;
  /**
   * For private messages
   */
  recipientPubkey?: string;
  recipientType?: RecipientType;
  roomId: string;
  senderPubkey: string;
  timestamp?: number;
  [property: string]: any;
}

export enum RecipientType {
  Everyone = "everyone",
  Host = "host",
  Private = "private",
}

/**
 * PSTN call state
 */
export interface PSTNCall {
  _v: string;
  /**
   * Masked phone number
   */
  callerPhone?: string;
  /**
   * Twilio call SID
   */
  callSid: string;
  connectedAt?: number;
  /**
   * Credits used for this call
   */
  creditsCost?: number;
  direction: PSTNCallDirection;
  /**
   * Duration in seconds
   */
  duration?: number;
  endedAt?: number;
  hotlineId: string;
  operatorPubkey?: string;
  startedAt?: number;
  status: PSTNCallStatus;
  targetPhone?: string;
  [property: string]: any;
}

export enum PSTNCallDirection {
  Inbound = "inbound",
  Outbound = "outbound",
}

export enum PSTNCallStatus {
  Completed = "completed",
  Connected = "connected",
  Failed = "failed",
  OnHold = "on_hold",
  Queued = "queued",
  Ringing = "ringing",
}

/**
 * PSTN credit balance for a group
 */
export interface CreditBalance {
  _v: string;
  groupId: string;
  monthlyAllocation: number;
  remaining: number;
  /**
   * Unix timestamp of next reset
   */
  resetDate?: number;
  used: number;
  [property: string]: any;
}
