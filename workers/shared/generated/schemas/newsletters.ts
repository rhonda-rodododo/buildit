/**
 * @generated from protocol/schemas/modules/newsletters/v1.json
 * @version 1.0.0
 * @minReaderVersion 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype
 */

// Version constants
export const NEWSLETTERS_VERSION = "1.0.0";
export const NEWSLETTERS_MIN_READER_VERSION = "1.0.0";

/**
 * A newsletter/mailing list configuration
 */
export interface Newsletter {
  _v: string;
  createdAt: number;
  description?: string;
  /**
   * Require email confirmation for subscriptions
   */
  doubleOptIn?: boolean;
  editors?: string[];
  /**
   * Sender display name
   */
  fromName?: string;
  groupId?: string;
  id: string;
  logo?: string;
  name: string;
  ownerPubkey: string;
  replyTo?: string;
  subscriberCount?: number;
  visibility?: Visibility;
  [property: string]: any;
}

export enum Visibility {
  Group = "group",
  Private = "private",
  Public = "public",
}

/**
 * An email campaign/issue
 */
export interface Campaign {
  _v: string;
  clickCount?: number;
  /**
   * Email content (HTML or markdown)
   */
  content: string;
  contentType?: ContentType;
  createdAt: number;
  createdBy: string;
  id: string;
  /**
   * Signal-style encrypted link previews for URLs in campaign content
   */
  linkPreviews?: LinkPreview[];
  newsletterId: string;
  openCount?: number;
  /**
   * Preview text shown in email clients
   */
  preheader?: string;
  /**
   * Number of recipients
   */
  recipientCount?: number;
  /**
   * Scheduled send time
   */
  scheduledAt?: number;
  /**
   * Subscriber segments to send to
   */
  segments?: string[];
  /**
   * Actual send time
   */
  sentAt?: number;
  status?: CampaignStatus;
  subject: string;
  updatedAt?: number;
  [property: string]: any;
}

export enum ContentType {
  HTML = "html",
  Markdown = "markdown",
}

/**
 * Privacy-preserving link preview (Signal-style). Sender fetches OG metadata + thumbnail,
 * encrypts with content. Recipients see static previews — zero third-party requests.
 */
export interface LinkPreview {
  /**
   * Open Graph og:description
   */
  description?: string;
  /**
   * Base64-encoded favicon (max ~10KB)
   */
  faviconData?: string;
  /**
   * Favicon MIME type
   */
  faviconType?: string;
  /**
   * Unix timestamp when preview was generated
   */
  fetchedAt: number;
  /**
   * Who fetched the preview — sender (direct) or proxy (API worker)
   */
  fetchedBy: FetchedBy;
  /**
   * Base64-encoded thumbnail (max ~50KB, encrypted with content)
   */
  imageData?: string;
  /**
   * Image height in pixels
   */
  imageHeight?: number;
  /**
   * MIME type (image/jpeg, image/png, image/webp)
   */
  imageType?: string;
  /**
   * Image width in pixels
   */
  imageWidth?: number;
  /**
   * Open Graph og:site_name
   */
  siteName?: string;
  /**
   * Open Graph og:title
   */
  title?: string;
  /**
   * Original URL
   */
  url: string;
  [property: string]: any;
}

/**
 * Who fetched the preview — sender (direct) or proxy (API worker)
 */
export enum FetchedBy {
  Proxy = "proxy",
  Sender = "sender",
}

export enum CampaignStatus {
  Draft = "draft",
  Failed = "failed",
  Scheduled = "scheduled",
  Sending = "sending",
  Sent = "sent",
}

/**
 * A newsletter subscriber
 */
export interface Subscriber {
  _v: string;
  confirmedAt?: number;
  customFields?: { [key: string]: any };
  email: string;
  id: string;
  name?: string;
  newsletterId: string;
  /**
   * BuildIt user pubkey if linked
   */
  pubkey?: string;
  /**
   * Segments this subscriber belongs to
   */
  segments?: string[];
  /**
   * How subscriber was acquired
   */
  source?: string;
  status: SubscriberStatus;
  subscribedAt: number;
  unsubscribedAt?: number;
  [property: string]: any;
}

export enum SubscriberStatus {
  Active = "active",
  Bounced = "bounced",
  Complained = "complained",
  Pending = "pending",
  Unsubscribed = "unsubscribed",
}

/**
 * An email template
 */
export interface Template {
  _v: string;
  content: string;
  contentType?: ContentType;
  createdAt: number;
  createdBy: string;
  id: string;
  name: string;
  newsletterId?: string;
  thumbnail?: string;
  [property: string]: any;
}
