/**
 * @generated from protocol/schemas/modules/federation/v1.json
 * @version 1.0.0
 * @minReaderVersion 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype
 */

// Version constants
export const FEDERATION_VERSION = "1.0.0";
export const FEDERATION_MIN_READER_VERSION = "1.0.0";

/**
 * Per-identity federation configuration
 */
export interface FederationConfig {
  /**
   * Schema version for graceful degradation
   */
  _v: string;
  /**
   * Whether ActivityPub federation is enabled
   */
  apEnabled: boolean;
  /**
   * Whether AT Protocol (Bluesky) federation is enabled
   */
  atEnabled: boolean;
  /**
   * Bluesky handle (e.g., user.bsky.social)
   */
  atHandle?: null | string;
  /**
   * Hex-encoded Nostr public key
   */
  nostrPubkey: string;
  /**
   * Federation username (e.g., user@buildit.network)
   */
  username?: string;
}

/**
 * Federation status for a specific post/event
 */
export interface FederationStatus {
  /**
   * Schema version for graceful degradation
   */
  _v: string;
  /**
   * The AP activity ID if federated
   */
  apActivityId?: null | string;
  /**
   * Whether this event has been federated via ActivityPub
   */
  apFederated?: boolean;
  /**
   * Whether this event has been cross-posted to AT Protocol
   */
  atFederated?: boolean;
  /**
   * The AT Protocol URI if cross-posted
   */
  atUri?: null | string;
  /**
   * ISO 8601 timestamp of when the event was federated
   */
  federatedAt?: null | string;
  /**
   * The Nostr event ID this status refers to
   */
  nostrEventId: string;
}

/**
 * An incoming interaction from a federated platform
 */
export interface FederationInteraction {
  /**
   * Schema version for graceful degradation
   */
  _v: string;
  /**
   * Content of the interaction (e.g., reply text)
   */
  content?: null | string;
  /**
   * Unique interaction ID
   */
  id?: number;
  /**
   * Type of interaction
   */
  interactionType: InteractionType;
  /**
   * When BuildIt received this interaction
   */
  receivedAt?: string;
  /**
   * The remote actor's identifier (AP actor URI or AT DID)
   */
  sourceActorId: string;
  /**
   * Human-readable name of the remote actor
   */
  sourceActorName?: null | string;
  /**
   * Which federated protocol this came from
   */
  sourceProtocol: SourceProtocol;
  /**
   * URL to the interaction on its home platform
   */
  sourceUrl?: null | string;
  /**
   * The Nostr event this interaction targets
   */
  targetNostrEventId?: null | string;
}

/**
 * Type of interaction
 */
export enum InteractionType {
  Like = "like",
  Reply = "reply",
  Repost = "repost",
}

/**
 * Which federated protocol this came from
 */
export enum SourceProtocol {
  Activitypub = "activitypub",
  Atproto = "atproto",
}

/**
 * Maps a Nostr pubkey to ActivityPub and AT Protocol accounts
 */
export interface FederationIdentity {
  _v: string;
  apActorId?: null | string;
  apEnabled: boolean;
  /**
   * Encrypted AP private key
   */
  apPrivateKey?: null | string;
  atDid?: null | string;
  atEnabled: boolean;
  atHandle?: null | string;
  atSessionEncrypted?: null | string;
  createdAt: string;
  nostrPubkey: string;
  updatedAt: string;
  username: string;
}

/**
 * ActivityPub follower relationship record
 */
export interface APFollower {
  _v: string;
  acceptedAt: string;
  id?: number;
  /**
   * Local actor username
   */
  localActor: string;
  /**
   * Remote AP actor URI
   */
  remoteActorId: string;
  /**
   * Remote actor's inbox URL
   */
  remoteInbox: string;
  /**
   * Remote actor's shared inbox URL
   */
  remoteSharedInbox?: null | string;
}

/**
 * Tracks a post federated across Nostr, AP, and AT Protocol
 */
export interface FederatedPost {
  _v: string;
  apActivityId?: null | string;
  atCid?: null | string;
  atUri?: null | string;
  federatedAt: string;
  nostrEventId: string;
  nostrPubkey: string;
}
