/**
 * @generated from protocol/schemas/modules/search/v1.json
 * @version 1.0.0
 * @minReaderVersion 1.0.0
 *
 * DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype
 */

// Version constants
export const SEARCH_VERSION = "1.0.0";
export const SEARCH_MIN_READER_VERSION = "1.0.0";

/**
 * A document indexed for search - internal representation stored in search index
 */
export interface SearchDocument {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Author/creator pubkey
   */
  authorPubkey?: string;
  /**
   * Searchable content body (plaintext, HTML stripped)
   */
  content: string;
  /**
   * When the source entity was created (Unix timestamp ms)
   */
  createdAt: number;
  /**
   * Original entity ID in the source module
   */
  entityId: string;
  /**
   * Short excerpt for display in search results
   */
  excerpt?: string;
  /**
   * Module-specific facets for filtering
   */
  facets?: {
    [key: string]: string[] | boolean | StickyFacetValue | number | string;
  };
  /**
   * Group this document belongs to
   */
  groupId: string;
  /**
   * Unique document ID (format: moduleType:entityId)
   */
  id: string;
  /**
   * When this document was indexed (Unix timestamp ms)
   */
  indexedAt: number;
  /**
   * Source module type (messaging, documents, events, wiki, etc.)
   */
  moduleType: string;
  /**
   * Tags associated with this document
   */
  tags?: string[];
  /**
   * Searchable title/name
   */
  title: string;
  /**
   * When the source entity was last updated (Unix timestamp ms)
   */
  updatedAt: number;
  /**
   * TF-IDF vector for semantic search (optional)
   */
  vector?: { [key: string]: number };
  [property: string]: any;
}

export interface StickyFacetValue {
  max: number;
  min: number;
}

export interface IndigoFacetValue {
  max: number;
  min: number;
}

/**
 * Defines a filterable facet for a module
 */
export interface FacetDefinition {
  /**
   * Facet key/identifier
   */
  key: string;
  /**
   * Display label for the facet
   */
  label: string;
  /**
   * Whether multiple values can be selected
   */
  multiSelect: boolean;
  /**
   * For hierarchical facets, the parent facet key
   */
  parentKey?: string;
  /**
   * Type of facet
   */
  type: FacetDefinitionType;
  [property: string]: any;
}

/**
 * Type of facet
 */
export enum FacetDefinitionType {
  Boolean = "boolean",
  Date = "date",
  Hierarchy = "hierarchy",
  Keyword = "keyword",
  Range = "range",
}

/**
 * Defines the scope of a search query
 *
 * Search across all accessible groups
 *
 * Search within a single group
 *
 * Search one module across all groups
 *
 * Search one module within a specific group
 */
export interface SearchScope {
  type: SearchScopeType;
  groupId?: string;
  moduleType?: string;
}

export enum SearchScopeType {
  Global = "global",
  Group = "group",
  Module = "module",
  ModuleInGroup = "module-in-group",
}

/**
 * Filter extracted from query or applied via UI
 */
export interface QueryFilter {
  /**
   * Filter field (e.g., 'author', 'date', 'tag')
   */
  field: string;
  /**
   * Filter operator
   */
  operator: Operator;
  /**
   * Filter value
   */
  value: string[] | boolean | IndecentFacetValue | number | string;
  [property: string]: any;
}

/**
 * Filter operator
 */
export enum Operator {
  Contains = "contains",
  Eq = "eq",
  Gt = "gt",
  Gte = "gte",
  In = "in",
  LTE = "lte",
  Lt = "lt",
  Ne = "ne",
  Range = "range",
}

export interface IndecentFacetValue {
  max: number;
  min: number;
}

/**
 * Parsed and normalized search query
 */
export interface ParsedQuery {
  /**
   * Expanded synonyms
   */
  expandedTerms?: string[];
  /**
   * Detected filters from query syntax
   */
  filters: ParsedQueryFilter[];
  /**
   * Extracted keywords (stemmed)
   */
  keywords: string[];
  /**
   * Exact phrase matches (quoted)
   */
  phrases: string[];
  /**
   * Original raw query string
   */
  raw: string;
  /**
   * Active search scope
   */
  scope: ParsedQuerySearchScope;
  [property: string]: any;
}

/**
 * Filter extracted from query or applied via UI
 */
export interface ParsedQueryFilter {
  /**
   * Filter field (e.g., 'author', 'date', 'tag')
   */
  field: string;
  /**
   * Filter operator
   */
  operator: Operator;
  /**
   * Filter value
   */
  value: string[] | boolean | HilariousFacetValue | number | string;
  [property: string]: any;
}

export interface HilariousFacetValue {
  max: number;
  min: number;
}

/**
 * Active search scope
 *
 * Defines the scope of a search query
 *
 * Search across all accessible groups
 *
 * Search within a single group
 *
 * Search one module across all groups
 *
 * Search one module within a specific group
 */
export interface ParsedQuerySearchScope {
  type: SearchScopeType;
  groupId?: string;
  moduleType?: string;
}

/**
 * A search result with relevance scoring
 */
export interface SearchResult {
  /**
   * The matching document
   */
  document: SearchResultDocument;
  /**
   * Highlighted excerpt with match markers
   */
  highlightedExcerpt?: string;
  /**
   * Fields where matches were found
   */
  matchedFields: string[];
  /**
   * Matched terms for highlighting
   */
  matchedTerms: string[];
  /**
   * Relevance score (higher is better)
   */
  score: number;
  [property: string]: any;
}

/**
 * The matching document
 *
 * A document indexed for search - internal representation stored in search index
 */
export interface SearchResultDocument {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Author/creator pubkey
   */
  authorPubkey?: string;
  /**
   * Searchable content body (plaintext, HTML stripped)
   */
  content: string;
  /**
   * When the source entity was created (Unix timestamp ms)
   */
  createdAt: number;
  /**
   * Original entity ID in the source module
   */
  entityId: string;
  /**
   * Short excerpt for display in search results
   */
  excerpt?: string;
  /**
   * Module-specific facets for filtering
   */
  facets?: {
    [key: string]: string[] | boolean | AmbitiousFacetValue | number | string;
  };
  /**
   * Group this document belongs to
   */
  groupId: string;
  /**
   * Unique document ID (format: moduleType:entityId)
   */
  id: string;
  /**
   * When this document was indexed (Unix timestamp ms)
   */
  indexedAt: number;
  /**
   * Source module type (messaging, documents, events, wiki, etc.)
   */
  moduleType: string;
  /**
   * Tags associated with this document
   */
  tags?: string[];
  /**
   * Searchable title/name
   */
  title: string;
  /**
   * When the source entity was last updated (Unix timestamp ms)
   */
  updatedAt: number;
  /**
   * TF-IDF vector for semantic search (optional)
   */
  vector?: { [key: string]: number };
  [property: string]: any;
}

export interface AmbitiousFacetValue {
  max: number;
  min: number;
}

/**
 * Aggregated search results
 */
export interface SearchResults {
  /**
   * Facet counts for filtering UI
   */
  facetCounts?: FacetCountsObject;
  /**
   * Query that produced these results
   */
  query: QueryObject;
  /**
   * Matching results
   */
  results: ResultElement[];
  /**
   * Search execution time in milliseconds
   */
  searchTimeMs: number;
  /**
   * Total count (may exceed results.length for pagination)
   */
  totalCount: number;
  [property: string]: any;
}

/**
 * Facet counts for filtering UI
 *
 * Aggregated facet counts for filtering UI
 */
export interface FacetCountsObject {
  /**
   * Author distribution
   */
  authors?: { [key: string]: number };
  /**
   * Module-specific facet counts
   */
  custom?: { [key: string]: { [key: string]: number } };
  /**
   * Date histogram (by day)
   */
  dates?: { [key: string]: number };
  /**
   * Group distribution
   */
  groups?: { [key: string]: number };
  /**
   * Module type distribution
   */
  moduleType?: { [key: string]: number };
  /**
   * Tag distribution
   */
  tags?: { [key: string]: number };
  [property: string]: any;
}

/**
 * Query that produced these results
 *
 * Parsed and normalized search query
 */
export interface QueryObject {
  /**
   * Expanded synonyms
   */
  expandedTerms?: string[];
  /**
   * Detected filters from query syntax
   */
  filters: QueryFilterObject[];
  /**
   * Extracted keywords (stemmed)
   */
  keywords: string[];
  /**
   * Exact phrase matches (quoted)
   */
  phrases: string[];
  /**
   * Original raw query string
   */
  raw: string;
  /**
   * Active search scope
   */
  scope: QuerySearchScope;
  [property: string]: any;
}

/**
 * Filter extracted from query or applied via UI
 */
export interface QueryFilterObject {
  /**
   * Filter field (e.g., 'author', 'date', 'tag')
   */
  field: string;
  /**
   * Filter operator
   */
  operator: Operator;
  /**
   * Filter value
   */
  value: string[] | boolean | CunningFacetValue | number | string;
  [property: string]: any;
}

export interface CunningFacetValue {
  max: number;
  min: number;
}

/**
 * Active search scope
 *
 * Defines the scope of a search query
 *
 * Search across all accessible groups
 *
 * Search within a single group
 *
 * Search one module across all groups
 *
 * Search one module within a specific group
 */
export interface QuerySearchScope {
  type: SearchScopeType;
  groupId?: string;
  moduleType?: string;
}

/**
 * A search result with relevance scoring
 */
export interface ResultElement {
  /**
   * The matching document
   */
  document: ResultDocument;
  /**
   * Highlighted excerpt with match markers
   */
  highlightedExcerpt?: string;
  /**
   * Fields where matches were found
   */
  matchedFields: string[];
  /**
   * Matched terms for highlighting
   */
  matchedTerms: string[];
  /**
   * Relevance score (higher is better)
   */
  score: number;
  [property: string]: any;
}

/**
 * The matching document
 *
 * A document indexed for search - internal representation stored in search index
 */
export interface ResultDocument {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Author/creator pubkey
   */
  authorPubkey?: string;
  /**
   * Searchable content body (plaintext, HTML stripped)
   */
  content: string;
  /**
   * When the source entity was created (Unix timestamp ms)
   */
  createdAt: number;
  /**
   * Original entity ID in the source module
   */
  entityId: string;
  /**
   * Short excerpt for display in search results
   */
  excerpt?: string;
  /**
   * Module-specific facets for filtering
   */
  facets?: {
    [key: string]: string[] | boolean | CunningFacetValue | number | string;
  };
  /**
   * Group this document belongs to
   */
  groupId: string;
  /**
   * Unique document ID (format: moduleType:entityId)
   */
  id: string;
  /**
   * When this document was indexed (Unix timestamp ms)
   */
  indexedAt: number;
  /**
   * Source module type (messaging, documents, events, wiki, etc.)
   */
  moduleType: string;
  /**
   * Tags associated with this document
   */
  tags?: string[];
  /**
   * Searchable title/name
   */
  title: string;
  /**
   * When the source entity was last updated (Unix timestamp ms)
   */
  updatedAt: number;
  /**
   * TF-IDF vector for semantic search (optional)
   */
  vector?: { [key: string]: number };
  [property: string]: any;
}

/**
 * Aggregated facet counts for filtering UI
 */
export interface FacetCounts {
  /**
   * Author distribution
   */
  authors?: { [key: string]: number };
  /**
   * Module-specific facet counts
   */
  custom?: { [key: string]: { [key: string]: number } };
  /**
   * Date histogram (by day)
   */
  dates?: { [key: string]: number };
  /**
   * Group distribution
   */
  groups?: { [key: string]: number };
  /**
   * Module type distribution
   */
  moduleType?: { [key: string]: number };
  /**
   * Tag distribution
   */
  tags?: { [key: string]: number };
  [property: string]: any;
}

/**
 * Active facet filters for search
 */
export interface FacetFilters {
  /**
   * Filter by author pubkeys
   */
  authors?: string[];
  /**
   * Custom facet filters by key
   */
  custom?: {
    [key: string]: Array<
      string[] | boolean | MagentaFacetValue | number | string
    >;
  };
  /**
   * Filter by date range (Unix timestamps)
   */
  dateRange?: FacetFiltersDateRange;
  /**
   * Filter by group IDs
   */
  groupIds?: string[];
  /**
   * Filter by module types
   */
  moduleTypes?: string[];
  /**
   * Filter by tags
   */
  tags?: string[];
  [property: string]: any;
}

export interface MagentaFacetValue {
  max: number;
  min: number;
}

/**
 * Filter by date range (Unix timestamps)
 */
export interface FacetFiltersDateRange {
  end: number;
  start: number;
  [property: string]: any;
}

/**
 * User-defined tag for organizing content
 */
export interface Tag {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Optional tag color (hex)
   */
  color?: string;
  /**
   * Creation timestamp (Unix ms)
   */
  createdAt: number;
  /**
   * Creator pubkey
   */
  createdBy: string;
  /**
   * Group this tag belongs to
   */
  groupId: string;
  /**
   * Unique tag ID
   */
  id: string;
  /**
   * Tag display name
   */
  name: string;
  /**
   * Parent tag ID for hierarchical tags
   */
  parentTagId?: string;
  /**
   * URL-safe slug
   */
  slug: string;
  /**
   * Last update timestamp (Unix ms)
   */
  updatedAt: number;
  /**
   * Number of entities using this tag
   */
  usageCount: number;
  [property: string]: any;
}

/**
 * Association between an entity and a tag
 */
export interface EntityTag {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Creation timestamp (Unix ms)
   */
  createdAt: number;
  /**
   * Creator pubkey
   */
  createdBy: string;
  /**
   * ID of the tagged entity
   */
  entityId: string;
  /**
   * Module type of the tagged entity
   */
  entityType: string;
  /**
   * Group ID
   */
  groupId: string;
  /**
   * Unique association ID
   */
  id: string;
  /**
   * Tag ID
   */
  tagId: string;
  [property: string]: any;
}

/**
 * Saved search query for quick access
 */
export interface SavedSearch {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Creation timestamp
   */
  createdAt: number;
  /**
   * Active filters
   */
  filters?: FiltersObject;
  /**
   * Unique saved search ID
   */
  id: string;
  /**
   * Last use timestamp
   */
  lastUsedAt?: number;
  /**
   * Display name for the saved search
   */
  name: string;
  /**
   * Search query string
   */
  query: string;
  /**
   * Search scope
   */
  scope: SavedSearchSearchScope;
  /**
   * Last update timestamp
   */
  updatedAt: number;
  /**
   * Number of times this search has been used
   */
  useCount: number;
  /**
   * User who saved this search
   */
  userPubkey: string;
  [property: string]: any;
}

/**
 * Active filters
 *
 * Active facet filters for search
 */
export interface FiltersObject {
  /**
   * Filter by author pubkeys
   */
  authors?: string[];
  /**
   * Custom facet filters by key
   */
  custom?: {
    [key: string]: Array<
      string[] | boolean | FriskyFacetValue | number | string
    >;
  };
  /**
   * Filter by date range (Unix timestamps)
   */
  dateRange?: FiltersDateRange;
  /**
   * Filter by group IDs
   */
  groupIds?: string[];
  /**
   * Filter by module types
   */
  moduleTypes?: string[];
  /**
   * Filter by tags
   */
  tags?: string[];
  [property: string]: any;
}

export interface FriskyFacetValue {
  max: number;
  min: number;
}

/**
 * Filter by date range (Unix timestamps)
 */
export interface FiltersDateRange {
  end: number;
  start: number;
  [property: string]: any;
}

/**
 * Search scope
 *
 * Defines the scope of a search query
 *
 * Search across all accessible groups
 *
 * Search within a single group
 *
 * Search one module across all groups
 *
 * Search one module within a specific group
 */
export interface SavedSearchSearchScope {
  type: SearchScopeType;
  groupId?: string;
  moduleType?: string;
}

/**
 * Recent search entry for history
 */
export interface RecentSearch {
  /**
   * Schema version
   */
  _v: string;
  /**
   * Unique entry ID
   */
  id: string;
  /**
   * Search query
   */
  query: string;
  /**
   * Number of results returned
   */
  resultCount: number;
  /**
   * Search scope
   */
  scope: RecentSearchSearchScope;
  /**
   * When the search was performed
   */
  timestamp: number;
  /**
   * User pubkey
   */
  userPubkey: string;
  [property: string]: any;
}

/**
 * Search scope
 *
 * Defines the scope of a search query
 *
 * Search across all accessible groups
 *
 * Search within a single group
 *
 * Search one module across all groups
 *
 * Search one module within a specific group
 */
export interface RecentSearchSearchScope {
  type: SearchScopeType;
  groupId?: string;
  moduleType?: string;
}

/**
 * Configuration for a module's search provider
 */
export interface SearchProviderConfig {
  /**
   * Result boost factor for this module (default: 1.0)
   */
  boost?: number;
  /**
   * Whether this provider is active
   */
  enabled: boolean;
  /**
   * Facets this module provides
   */
  facetDefinitions: FacetDefinitionElement[];
  /**
   * Module type this provider handles
   */
  moduleType: string;
  [property: string]: any;
}

/**
 * Defines a filterable facet for a module
 */
export interface FacetDefinitionElement {
  /**
   * Facet key/identifier
   */
  key: string;
  /**
   * Display label for the facet
   */
  label: string;
  /**
   * Whether multiple values can be selected
   */
  multiSelect: boolean;
  /**
   * For hierarchical facets, the parent facet key
   */
  parentKey?: string;
  /**
   * Type of facet
   */
  type: FacetDefinitionType;
  [property: string]: any;
}

/**
 * Options for fine-tuning search behavior
 */
export interface SearchOptions {
  /**
   * Field boost weights
   */
  boost?: { [key: string]: number };
  /**
   * Enable fuzzy matching
   */
  fuzzy?: boolean;
  /**
   * Fuzzy match threshold (0-1)
   */
  fuzzyThreshold?: number;
  /**
   * Highlight matched terms in results
   */
  highlight?: boolean;
  /**
   * Maximum results to return
   */
  limit?: number;
  /**
   * Results to skip (pagination)
   */
  offset?: number;
  /**
   * Enable prefix matching
   */
  prefix?: boolean;
  /**
   * Enable semantic/TF-IDF search
   */
  semantic?: boolean;
  /**
   * Semantic search weight (0-1), default 0.3
   */
  semanticWeight?: number;
  [property: string]: any;
}

/**
 * Statistics about the search index
 */
export interface IndexStats {
  /**
   * Documents by group
   */
  byGroup: { [key: string]: number };
  /**
   * Documents by module type
   */
  byModuleType: { [key: string]: number };
  /**
   * Last full reindex timestamp
   */
  lastFullReindex?: number;
  /**
   * Last incremental update timestamp
   */
  lastIncrementalUpdate?: number;
  /**
   * Estimated index size in bytes
   */
  sizeBytes: number;
  /**
   * Total documents indexed
   */
  totalDocuments: number;
  /**
   * Total unique terms in index
   */
  uniqueTerms: number;
  [property: string]: any;
}

/**
 * Concept expansion for semantic search in organizing contexts
 */
export interface ConceptExpansion {
  /**
   * Broader concept
   */
  broader?: string;
  /**
   * Narrower concepts
   */
  narrower?: string[];
  /**
   * Related/synonym terms
   */
  synonyms: string[];
  /**
   * Primary term
   */
  term: string;
  [property: string]: any;
}
