//! Content module schema types
//!
//! @generated from protocol/schemas/modules/content/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Content module
pub const CONTENT_VERSION: &str = "1.0.0";
/// Minimum reader version for Content module
pub const CONTENT_MIN_READER_VERSION: &str = "1.0.0";

/// Privacy-preserving link preview (Signal-style). Sender fetches OG metadata + thumbnail,
/// encrypts with content. Recipients see static previews — zero third-party requests.
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct LinkPreview {
    /// Open Graph og:description
    pub description: Option<String>,

    /// Base64-encoded favicon (max ~10KB)
    pub favicon_data: Option<String>,

    /// Favicon MIME type
    pub favicon_type: Option<String>,

    /// Unix timestamp when preview was generated
    pub fetched_at: i64,

    /// Who fetched the preview — sender (direct) or proxy (API worker)
    pub fetched_by: FetchedBy,

    /// Base64-encoded thumbnail (max ~50KB, encrypted with content)
    pub image_data: Option<String>,

    /// Image height in pixels
    pub image_height: Option<i64>,

    /// MIME type (image/jpeg, image/png, image/webp)
    pub image_type: Option<String>,

    /// Image width in pixels
    pub image_width: Option<i64>,

    /// Open Graph og:site_name
    pub site_name: Option<String>,

    /// Open Graph og:title
    pub title: Option<String>,

    /// Original URL
    pub url: String,
}

/// Who fetched the preview — sender (direct) or proxy (API worker)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum FetchedBy {
    Proxy,

    Sender,
}

/// oEmbed/secure embed metadata for rich media (videos, audio, code snippets). Used for
/// privacy-respecting iframe embeds.
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct EmbedInfo {
    /// Privacy-respecting embed URL (e.g. youtube-nocookie.com)
    pub embed_url: Option<String>,

    /// Embed height in pixels
    pub height: Option<i64>,

    /// Provider ID (youtube, vimeo, spotify, soundcloud, etc.)
    pub provider: String,

    /// Base64-encoded thumbnail image
    pub thumbnail_data: Option<String>,

    /// Thumbnail MIME type
    pub thumbnail_type: Option<String>,

    /// Content title from oEmbed response
    pub title: Option<String>,

    /// Original content URL
    pub url: String,

    /// Embed width in pixels
    pub width: Option<i64>,
}

