//! Groups module schema types
//!
//! @generated from protocol/schemas/modules/groups/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Groups module
pub const GROUPS_VERSION: &str = "1.0.0";
/// Minimum reader version for Groups module
pub const GROUPS_MIN_READER_VERSION: &str = "1.0.0";

use std::collections::HashMap;

/// A member of a group with role and permissions
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct GroupMember {
    #[serde(rename = "_v")]
    pub v: String,

    pub invited_by: Option<String>,

    pub joined_at: i64,

    pub permissions: Option<Vec<GroupPermission>>,

    pub pubkey: String,

    pub role: GroupRole,
}

/// Granular group permission
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum GroupPermission {
    #[serde(rename = "create_events")]
    CreateEvents,

    #[serde(rename = "create_proposals")]
    CreateProposals,

    #[serde(rename = "edit_group")]
    EditGroup,

    #[serde(rename = "invite_members")]
    InviteMembers,

    #[serde(rename = "manage_events")]
    ManageEvents,

    #[serde(rename = "post_messages")]
    PostMessages,

    #[serde(rename = "remove_members")]
    RemoveMembers,

    Vote,
}

/// Member role within a group
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum GroupRole {
    Admin,

    Member,

    Moderator,

    Owner,
}

/// A BuildIt group (organization, chapter, team)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Group {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: i64,

    pub created_by: String,

    pub creation_event_id: String,

    pub description: String,

    pub enabled_modules: Vec<GroupModule>,

    /// Deterministic ID based on creation event
    pub id: String,

    pub location: Option<String>,

    pub members: Vec<MemberElement>,

    pub metadata_event_id: Option<String>,

    pub name: String,

    pub picture: Option<String>,

    pub privacy_level: GroupPrivacyLevel,

    pub tags: Option<Vec<String>>,

    pub website: Option<String>,
}

/// Module identifier that can be enabled per-group
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "kebab-case")]
pub enum GroupModule {
    Crm,

    #[serde(rename = "custom-fields")]
    CustomFields,

    Database,

    Documents,

    Events,

    Files,

    Forms,

    Fundraising,

    Governance,

    Hotlines,

    Messaging,

    Microblogging,

    #[serde(rename = "mutual-aid")]
    MutualAid,

    Newsletters,

    Public,

    Publishing,

    Wiki,
}

/// A member of a group with role and permissions
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct MemberElement {
    #[serde(rename = "_v")]
    pub v: String,

    pub invited_by: Option<String>,

    pub joined_at: i64,

    pub permissions: Option<Vec<GroupPermission>>,

    pub pubkey: String,

    pub role: GroupRole,
}

/// Group privacy/discovery level
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum GroupPrivacyLevel {
    Private,

    Public,

    Secret,
}

/// An invitation to join a group
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct GroupInvitation {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: i64,

    pub expires_at: Option<i64>,

    pub group_id: String,

    pub id: String,

    pub invited_by: String,

    pub invited_pubkey: String,

    pub message: Option<String>,

    pub status: Status,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Status {
    Accepted,

    Declined,

    Expired,

    Pending,
}

/// Group configuration settings
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct GroupSettings {
    #[serde(rename = "_v")]
    pub v: String,

    pub allow_direct_messages: Option<bool>,

    pub allow_threads: Option<bool>,

    pub default_permissions: Vec<GroupPermission>,

    pub default_role: GroupRole,

    pub discoverable: bool,

    pub group_id: String,

    pub module_settings: Option<HashMap<String, Option<serde_json::Value>>>,

    pub require_approval: bool,
}

/// A discussion thread within a group
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct GroupThread {
    #[serde(rename = "_v")]
    pub v: String,

    pub category: Option<String>,

    pub created_at: i64,

    pub created_by: String,

    pub group_id: String,

    pub id: String,

    pub last_message_at: i64,

    pub message_count: i64,

    pub pinned: Option<bool>,

    pub title: String,
}

/// A message within a group thread
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct GroupMessage {
    #[serde(rename = "_v")]
    pub v: String,

    pub content: String,

    pub deleted: Option<bool>,

    pub edited: Option<bool>,

    pub edited_at: Option<i64>,

    pub from: String,

    pub group_id: String,

    pub id: String,

    pub reactions: Option<HashMap<String, Vec<String>>>,

    pub reply_to: Option<String>,

    pub thread_id: String,

    pub timestamp: i64,
}

