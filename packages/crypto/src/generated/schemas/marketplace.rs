//! Marketplace module schema types
//!
//! @generated from protocol/schemas/modules/marketplace/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Marketplace module
pub const MARKETPLACE_VERSION: &str = "1.0.0";
/// Minimum reader version for Marketplace module
pub const MARKETPLACE_MIN_READER_VERSION: &str = "1.0.0";

/// A marketplace listing for products, services, co-op goods, initiatives, or shared
/// resources
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Listing {
    #[serde(rename = "_v")]
    pub v: String,

    /// Freeform availability description (e.g., 'Weekdays 9-5', 'Immediate')
    pub availability: Option<String>,

    /// How buyers should contact the seller
    pub contact_method: Option<ContactMethod>,

    /// Associated co-op profile ID, if applicable
    pub coop_id: Option<String>,

    pub created_at: i64,

    pub created_by: String,

    /// ISO 4217 currency code
    pub currency: Option<String>,

    pub description: Option<String>,

    /// Unix timestamp when listing expires
    pub expires_at: Option<i64>,

    /// Group this listing belongs to
    pub group_id: Option<String>,

    pub id: String,

    /// Image URLs for the listing
    pub images: Option<Vec<String>>,

    /// Location using custom-fields LocationValue type (privacy-aware precision)
    pub location: Option<ListingLocation>,

    /// Price in smallest currency unit (cents). Null or 0 for free/negotiable
    pub price: Option<f64>,

    pub status: ListingStatus,

    pub tags: Option<Vec<String>>,

    pub title: String,

    /// Category of listing
    #[serde(rename = "type")]
    pub listing_type: Type,

    pub updated_at: Option<i64>,
}

/// How buyers should contact the seller
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "kebab-case")]
pub enum ContactMethod {
    Dm,

    #[serde(rename = "public-reply")]
    PublicReply,
}

/// Category of listing
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "kebab-case")]
pub enum Type {
    #[serde(rename = "co-op")]
    CoOp,

    Initiative,

    Product,

    Resource,

    Service,
}

/// Location using custom-fields LocationValue type (privacy-aware precision)
///
/// Structured location value stored by location fields
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct ListingLocation {
    /// Human-readable location label (address, place name, etc.)
    pub label: String,

    /// Latitude in decimal degrees
    pub lat: f64,

    /// Longitude in decimal degrees
    pub lng: f64,

    /// Privacy precision level. Controls how precisely the location is shared.
    pub precision: Precision,
}

/// Privacy precision level. Controls how precisely the location is shared.
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Precision {
    City,

    Exact,

    Neighborhood,

    Region,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ListingStatus {
    Active,

    Expired,

    Removed,

    Sold,
}

/// A worker cooperative or collective profile
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct CoopProfile {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: Option<i64>,

    pub description: Option<String>,

    /// How the co-op makes decisions
    pub governance_model: Option<GovernanceModel>,

    pub group_id: Option<String>,

    pub id: String,

    /// Co-op logo or profile image
    pub image: Option<String>,

    /// Industry or sector
    pub industry: Option<String>,

    pub location: Option<CoopProfileLocation>,

    pub member_count: Option<i64>,

    pub name: String,

    /// Nostr public key for the co-op identity
    pub nostr_pubkey: String,

    pub updated_at: Option<i64>,

    /// Pubkeys of people who have vouched for this co-op
    pub verified_by: Option<Vec<String>>,

    pub website: Option<String>,
}

/// How the co-op makes decisions
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum GovernanceModel {
    Consensus,

    Democratic,

    Holacracy,

    Hybrid,

    Other,

    Sociocracy,
}

/// Structured location value stored by location fields
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct CoopProfileLocation {
    /// Human-readable location label (address, place name, etc.)
    pub label: String,

    /// Latitude in decimal degrees
    pub lat: f64,

    /// Longitude in decimal degrees
    pub lng: f64,

    /// Privacy precision level. Controls how precisely the location is shared.
    pub precision: Precision,
}

/// A review for a listing or co-op
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Review {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: i64,

    pub id: String,

    /// The listing or co-op being reviewed
    pub listing_id: String,

    pub rating: i64,

    pub reviewer_pubkey: String,

    pub text: Option<String>,
}

/// A time-banking or skill exchange offer
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct SkillExchange {
    #[serde(rename = "_v")]
    pub v: String,

    /// Hours per week available for exchange
    pub available_hours: Option<f64>,

    pub created_at: i64,

    pub created_by: String,

    pub group_id: Option<String>,

    /// Accumulated timebank hours
    pub hourly_timebank: Option<f64>,

    pub id: String,

    pub location: Option<SkillExchangeLocation>,

    /// Skill the user can offer
    pub offered_skill: String,

    /// Skill the user is looking for in exchange
    pub requested_skill: String,

    pub status: Option<SkillExchangeStatus>,

    pub updated_at: Option<i64>,
}

/// Structured location value stored by location fields
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct SkillExchangeLocation {
    /// Human-readable location label (address, place name, etc.)
    pub label: String,

    /// Latitude in decimal degrees
    pub lat: f64,

    /// Longitude in decimal degrees
    pub lng: f64,

    /// Privacy precision level. Controls how precisely the location is shared.
    pub precision: Precision,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum SkillExchangeStatus {
    Active,

    Cancelled,

    Completed,

    Matched,
}

/// A shared resource (tool, space, vehicle) available for borrowing
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct ResourceShare {
    #[serde(rename = "_v")]
    pub v: String,

    /// Weekly availability schedule
    pub availability: Option<Vec<Availability>>,

    pub created_at: i64,

    pub created_by: String,

    /// Deposit amount in smallest currency unit
    pub deposit_amount: Option<f64>,

    pub deposit_currency: Option<String>,

    /// Whether a deposit is required to borrow
    pub deposit_required: Option<bool>,

    pub description: Option<String>,

    pub group_id: Option<String>,

    pub id: String,

    pub images: Option<Vec<String>>,

    pub location: Option<ResourceShareLocation>,

    pub name: String,

    /// Category of shared resource
    pub resource_type: ResourceType,

    pub status: Option<ResourceShareStatus>,

    pub updated_at: Option<i64>,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Availability {
    /// 0 = Sunday, 6 = Saturday
    pub day_of_week: i64,

    pub end_hour: i64,

    pub start_hour: i64,
}

/// Structured location value stored by location fields
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct ResourceShareLocation {
    /// Human-readable location label (address, place name, etc.)
    pub label: String,

    /// Latitude in decimal degrees
    pub lat: f64,

    /// Longitude in decimal degrees
    pub lng: f64,

    /// Privacy precision level. Controls how precisely the location is shared.
    pub precision: Precision,
}

/// Category of shared resource
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ResourceType {
    Space,

    Tool,

    Vehicle,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ResourceShareStatus {
    Available,

    Borrowed,

    Unavailable,
}

