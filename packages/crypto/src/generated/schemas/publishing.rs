//! Publishing module schema types
//!
//! @generated from protocol/schemas/modules/publishing/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Publishing module
pub const PUBLISHING_VERSION: &str = "1.0.0";
/// Minimum reader version for Publishing module
pub const PUBLISHING_MIN_READER_VERSION: &str = "1.0.0";

/// A published article or blog post
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Article {
    #[serde(rename = "_v")]
    pub v: String,

    pub author_name: Option<String>,

    pub author_pubkey: String,

    /// Original URL if cross-posted
    pub canonical_url: Option<String>,

    pub categories: Option<Vec<String>>,

    pub coauthors: Option<Vec<String>>,

    /// Article content (markdown)
    pub content: String,

    pub cover_image: Option<String>,

    pub created_at: i64,

    /// Short preview text
    pub excerpt: Option<String>,

    pub group_id: Option<String>,

    pub id: String,

    /// Signal-style encrypted link previews for URLs in article content
    pub link_previews: Option<Vec<ArticleLinkPreview>>,

    /// Publication timestamp
    pub published_at: Option<i64>,

    /// Estimated reading time in minutes
    pub reading_time: Option<i64>,

    pub seo: Option<SeoClass>,

    /// URL-friendly identifier
    pub slug: Option<String>,

    pub status: Option<Status>,

    pub subtitle: Option<String>,

    pub tags: Option<Vec<String>>,

    pub title: String,

    pub updated_at: Option<i64>,

    pub view_count: Option<i64>,

    pub visibility: Option<Visibility>,
}

/// Privacy-preserving link preview (Signal-style). Sender fetches OG metadata + thumbnail,
/// encrypts with content. Recipients see static previews — zero third-party requests.
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct ArticleLinkPreview {
    /// Open Graph og:description
    pub description: Option<String>,

    /// Base64-encoded favicon (max ~10KB)
    pub favicon_data: Option<String>,

    /// Favicon MIME type
    pub favicon_type: Option<String>,

    /// Unix timestamp when preview was generated
    pub fetched_at: i64,

    /// Who fetched the preview — sender (direct) or proxy (API worker)
    pub fetched_by: FetchedBy,

    /// Base64-encoded thumbnail (max ~50KB, encrypted with content)
    pub image_data: Option<String>,

    /// Image height in pixels
    pub image_height: Option<i64>,

    /// MIME type (image/jpeg, image/png, image/webp)
    pub image_type: Option<String>,

    /// Image width in pixels
    pub image_width: Option<i64>,

    /// Open Graph og:site_name
    pub site_name: Option<String>,

    /// Open Graph og:title
    pub title: Option<String>,

    /// Original URL
    pub url: String,
}

/// Who fetched the preview — sender (direct) or proxy (API worker)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum FetchedBy {
    Proxy,

    Sender,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct SeoClass {
    pub keywords: Option<Vec<String>>,

    pub meta_description: Option<String>,

    pub meta_title: Option<String>,

    pub og_image: Option<String>,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Status {
    Archived,

    Draft,

    Published,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Visibility {
    Group,

    Private,

    Public,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct SeoMetadata {
    pub keywords: Option<Vec<String>>,

    pub meta_description: Option<String>,

    pub meta_title: Option<String>,

    pub og_image: Option<String>,
}

/// A comment on an article
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Comment {
    #[serde(rename = "_v")]
    pub v: String,

    pub article_id: String,

    pub author_name: Option<String>,

    pub author_pubkey: String,

    pub content: String,

    pub created_at: i64,

    pub id: String,

    /// Signal-style encrypted link previews for URLs in comment
    pub link_previews: Option<Vec<CommentLinkPreview>>,

    /// Parent comment ID for replies
    pub parent_id: Option<String>,

    pub updated_at: Option<i64>,
}

/// Privacy-preserving link preview (Signal-style). Sender fetches OG metadata + thumbnail,
/// encrypts with content. Recipients see static previews — zero third-party requests.
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct CommentLinkPreview {
    /// Open Graph og:description
    pub description: Option<String>,

    /// Base64-encoded favicon (max ~10KB)
    pub favicon_data: Option<String>,

    /// Favicon MIME type
    pub favicon_type: Option<String>,

    /// Unix timestamp when preview was generated
    pub fetched_at: i64,

    /// Who fetched the preview — sender (direct) or proxy (API worker)
    pub fetched_by: FetchedBy,

    /// Base64-encoded thumbnail (max ~50KB, encrypted with content)
    pub image_data: Option<String>,

    /// Image height in pixels
    pub image_height: Option<i64>,

    /// MIME type (image/jpeg, image/png, image/webp)
    pub image_type: Option<String>,

    /// Image width in pixels
    pub image_width: Option<i64>,

    /// Open Graph og:site_name
    pub site_name: Option<String>,

    /// Open Graph og:title
    pub title: Option<String>,

    /// Original URL
    pub url: String,
}

/// A publication or blog collection
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Publication {
    #[serde(rename = "_v")]
    pub v: String,

    pub cover_image: Option<String>,

    pub created_at: i64,

    pub description: Option<String>,

    pub editors: Option<Vec<String>>,

    pub group_id: Option<String>,

    pub id: String,

    pub logo: Option<String>,

    pub name: String,

    pub owner_pubkey: String,

    pub visibility: Option<Visibility>,
}

