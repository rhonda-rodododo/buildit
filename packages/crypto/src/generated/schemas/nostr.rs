//! Nostr module schema types
//!
//! @generated from protocol/schemas/core/nostr/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Nostr module
pub const NOSTR_VERSION: &str = "1.0.0";
/// Minimum reader version for Nostr module
pub const NOSTR_MIN_READER_VERSION: &str = "1.0.0";

/// A signed Nostr event (NIP-01)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct NostrEvent {
    /// Schema version
    #[serde(rename = "_v")]
    pub v: String,

    /// Event content (may be encrypted)
    pub content: String,

    /// Unix timestamp in seconds
    pub created_at: i64,

    /// 32-byte lowercase hex event ID
    pub id: String,

    /// Event kind number
    pub kind: i64,

    /// 32-byte lowercase hex public key
    pub pubkey: String,

    /// 64-byte lowercase hex Schnorr signature
    pub sig: String,

    /// Array of tag arrays
    pub tags: Vec<Vec<String>>,
}

/// An unsigned Nostr event (before signing)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct UnsignedEvent {
    /// Schema version
    #[serde(rename = "_v")]
    pub v: String,

    /// Event content
    pub content: String,

    /// Unix timestamp in seconds
    pub created_at: i64,

    /// Event kind number
    pub kind: i64,

    /// 32-byte lowercase hex public key
    pub pubkey: String,

    /// Array of tag arrays
    pub tags: Vec<Vec<String>>,
}

/// Nostr subscription filter (NIP-01)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct NostrFilter {
    /// Schema version
    #[serde(rename = "_v")]
    pub v: Option<String>,

    /// Author pubkeys to match
    pub authors: Option<Vec<String>>,

    /// Event IDs to match
    pub ids: Option<Vec<String>>,

    /// Event kinds to match
    pub kinds: Option<Vec<i64>>,

    /// Maximum number of events to return
    pub limit: Option<i64>,

    /// Full-text search query (NIP-50)
    pub search: Option<String>,

    /// Events after this Unix timestamp
    pub since: Option<i64>,

    /// Events before this Unix timestamp
    pub until: Option<i64>,
}

/// Configuration for a Nostr relay connection
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct RelayConfig {
    #[serde(rename = "_v")]
    pub v: String,

    /// Whether to read events from this relay
    pub read: bool,

    /// WebSocket URL of the relay
    pub url: String,

    /// Whether to write events to this relay
    pub write: bool,
}

/// Runtime status of a relay connection
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct RelayStatus {
    #[serde(rename = "_v")]
    pub v: String,

    pub connected: bool,

    pub connecting: bool,

    pub error: Option<String>,

    /// Unix timestamp of last successful connection
    pub last_connected: Option<i64>,

    pub messages_received: Option<i64>,

    pub messages_sent: Option<i64>,

    pub url: String,
}

/// Relay information document (NIP-11)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct RelayInfo {
    #[serde(rename = "_v")]
    pub v: String,

    pub contact: Option<String>,

    pub description: String,

    pub icon: Option<String>,

    pub limitation: Option<LimitationClass>,

    pub name: String,

    pub payments_url: Option<String>,

    pub pubkey: Option<String>,

    pub software: String,

    pub supported_nips: Vec<i64>,

    pub version: String,
}

/// NIP-11 relay limitation settings
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct LimitationClass {
    #[serde(rename = "_v")]
    pub v: Option<String>,

    pub auth_required: Option<bool>,

    pub max_content_length: Option<i64>,

    pub max_event_tags: Option<i64>,

    pub max_filters: Option<i64>,

    pub max_limit: Option<i64>,

    pub max_message_length: Option<i64>,

    pub max_subid_length: Option<i64>,

    pub max_subscriptions: Option<i64>,

    pub min_pow_difficulty: Option<i64>,

    pub min_prefix: Option<i64>,

    pub payment_required: Option<bool>,
}

/// NIP-11 relay limitation settings
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct RelayLimitation {
    #[serde(rename = "_v")]
    pub v: Option<String>,

    pub auth_required: Option<bool>,

    pub max_content_length: Option<i64>,

    pub max_event_tags: Option<i64>,

    pub max_filters: Option<i64>,

    pub max_limit: Option<i64>,

    pub max_message_length: Option<i64>,

    pub max_subid_length: Option<i64>,

    pub max_subscriptions: Option<i64>,

    pub min_pow_difficulty: Option<i64>,

    pub min_prefix: Option<i64>,

    pub payment_required: Option<bool>,
}

/// Result of publishing an event to a relay
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct PublishResult {
    #[serde(rename = "_v")]
    pub v: String,

    pub error: Option<String>,

    pub relay: String,

    pub success: bool,
}

/// NIP-17 rumor (unencrypted inner event)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct Rumor {
    #[serde(rename = "_v")]
    pub v: String,

    pub content: String,

    pub created_at: i64,

    pub kind: i64,

    pub tags: Vec<Vec<String>>,
}

/// NIP-17 seal (kind 13 encrypted rumor)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct Seal {
    #[serde(rename = "_v")]
    pub v: String,

    pub content: String,

    pub created_at: i64,

    pub id: String,

    /// Always 13 for Seal events
    pub kind: i64,

    pub pubkey: String,

    pub sig: String,

    pub tags: Vec<Vec<String>>,
}

/// NIP-17 gift wrap (kind 1059 outer envelope)
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct GiftWrap {
    #[serde(rename = "_v")]
    pub v: String,

    pub content: String,

    pub created_at: i64,

    pub id: String,

    /// Always 1059 for GiftWrap events
    pub kind: i64,

    /// Ephemeral key
    pub pubkey: String,

    pub sig: String,

    pub tags: Vec<Vec<String>>,
}

