//! Polls module schema types
//!
//! @generated from protocol/schemas/modules/polls/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Polls module
pub const POLLS_VERSION: &str = "1.0.0";
/// Minimum reader version for Polls module
pub const POLLS_MIN_READER_VERSION: &str = "1.0.0";

/// A single poll option
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct PollOption {
    #[serde(rename = "_v")]
    pub v: String,

    pub id: String,

    pub text: String,

    pub vote_count: i64,
}

/// A poll attached to a post or standalone
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Poll {
    #[serde(rename = "_v")]
    pub v: String,

    pub allow_anonymous_votes: Option<bool>,

    pub author_id: String,

    pub created_at: i64,

    /// Unix timestamp when poll closes
    pub ends_at: i64,

    pub hide_results_until_ended: Option<bool>,

    pub id: String,

    pub is_ended: Option<bool>,

    pub nostr_event_id: Option<String>,

    pub options: Vec<OptionElement>,

    pub poll_type: PollType,

    /// Associated post ID if embedded
    pub post_id: Option<String>,

    pub question: String,

    pub status: Option<PollStatus>,

    pub total_votes: i64,

    pub updated_at: Option<i64>,

    pub voter_count: Option<i64>,
}

/// A single poll option
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct OptionElement {
    #[serde(rename = "_v")]
    pub v: String,

    pub id: String,

    pub text: String,

    pub vote_count: i64,
}

/// Poll voting style
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum PollType {
    Multiple,

    #[serde(rename = "ranked_choice")]
    RankedChoice,

    Single,
}

/// Poll lifecycle status
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum PollStatus {
    Active,

    Cancelled,

    Closed,

    Draft,
}

/// A vote cast on a poll
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct PollVote {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: i64,

    pub id: String,

    pub nostr_event_id: Option<String>,

    pub option_ids: Vec<String>,

    pub poll_id: String,

    pub voter_id: String,
}

