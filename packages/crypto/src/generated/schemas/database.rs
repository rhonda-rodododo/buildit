//! Database module schema types
//!
//! @generated from protocol/schemas/modules/database/v1.json
//! Version: 1.0.0
//! Min Reader Version: 1.0.0
//!
//! DO NOT EDIT - This file is auto-generated by tools/codegen using quicktype

use serde::{Deserialize, Serialize};

/// Schema version for Database module
pub const DATABASE_VERSION: &str = "1.0.0";
/// Minimum reader version for Database module
pub const DATABASE_MIN_READER_VERSION: &str = "1.0.0";

use std::collections::HashMap;

/// A custom database table definition
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Table {
    #[serde(rename = "_v")]
    pub v: String,

    pub columns: Vec<ColumnElement>,

    pub created_at: i64,

    pub created_by: String,

    pub description: Option<String>,

    pub edit_permission: Option<EditPermission>,

    pub group_id: Option<String>,

    pub id: String,

    /// Table name
    pub name: String,

    pub updated_at: Option<i64>,

    pub visibility: Option<Visibility>,
}

/// A column definition in a table
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct ColumnElement {
    pub default_value: Option<serde_json::Value>,

    pub description: Option<String>,

    /// Formula expression for formula columns
    pub formula: Option<String>,

    pub id: String,

    pub name: String,

    /// Options for select/multiselect columns
    pub options: Option<Vec<ColumnOption>>,

    pub required: Option<bool>,

    #[serde(rename = "type")]
    pub column_type: ColumnType,

    pub unique: Option<bool>,

    /// Display width in pixels
    pub width: Option<i64>,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ColumnType {
    Boolean,

    Currency,

    Date,

    Datetime,

    Email,

    File,

    Formula,

    Multiselect,

    Number,

    Percent,

    Phone,

    Select,

    Text,

    Url,

    User,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct ColumnOption {
    pub color: Option<String>,

    pub label: String,

    pub value: String,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum EditPermission {
    Editors,

    Group,

    Owner,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Visibility {
    Group,

    Private,

    Public,
}

/// A column definition in a table
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Column {
    pub default_value: Option<serde_json::Value>,

    pub description: Option<String>,

    /// Formula expression for formula columns
    pub formula: Option<String>,

    pub id: String,

    pub name: String,

    /// Options for select/multiselect columns
    pub options: Option<Vec<ColumnOptionClass>>,

    pub required: Option<bool>,

    #[serde(rename = "type")]
    pub column_type: ColumnType,

    pub unique: Option<bool>,

    /// Display width in pixels
    pub width: Option<i64>,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct ColumnOptionClass {
    pub color: Option<String>,

    pub label: String,

    pub value: String,
}

/// A row of data in a table
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Row {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: i64,

    pub created_by: String,

    /// Column ID to value mapping
    pub data: HashMap<String, Option<serde_json::Value>>,

    pub id: String,

    pub table_id: String,

    pub updated_at: Option<i64>,

    pub updated_by: Option<String>,
}

/// A saved view configuration for a table
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct View {
    #[serde(rename = "_v")]
    pub v: String,

    pub created_at: i64,

    pub created_by: String,

    pub filters: Option<Vec<FilterElement>>,

    /// Column ID to group by
    pub group_by: Option<String>,

    pub hidden_columns: Option<Vec<String>>,

    pub id: String,

    pub name: String,

    pub sorts: Option<Vec<SortElement>>,

    pub table_id: String,

    #[serde(rename = "type")]
    pub view_type: ViewType,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct FilterElement {
    pub column_id: String,

    pub operator: Operator,

    pub value: Option<serde_json::Value>,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Operator {
    Contains,

    Equals,

    Greater,

    #[serde(rename = "greater_or_equal")]
    GreaterOrEqual,

    #[serde(rename = "is_empty")]
    IsEmpty,

    #[serde(rename = "is_not_empty")]
    IsNotEmpty,

    Less,

    #[serde(rename = "less_or_equal")]
    LessOrEqual,

    #[serde(rename = "not_contains")]
    NotContains,

    #[serde(rename = "not_equals")]
    NotEquals,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct SortElement {
    pub column_id: String,

    pub direction: Direction,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Direction {
    Asc,

    Desc,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ViewType {
    Calendar,

    Gallery,

    Grid,

    Kanban,

    List,

    Table,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Filter {
    pub column_id: String,

    pub operator: Operator,

    pub value: Option<serde_json::Value>,
}

#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct Sort {
    pub column_id: String,

    pub direction: Direction,
}

