<!DOCTYPE html>
<html>
<head>
  <title>Debug Initialization</title>
</head>
<body>
  <h1>Initialization Debug</h1>
  <pre id="log"></pre>
  <script>
    const log = document.getElementById('log');
    const originalLog = console.log;
    const originalError = console.error;
    const originalWarn = console.warn;

    function addLog(type, ...args) {
      const message = args.map(arg => {
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg, null, 2); }
          catch { return String(arg); }
        }
        return String(arg);
      }).join(' ');

      log.textContent += `[${type.toUpperCase()}] ${message}\n`;
      log.scrollTop = log.scrollHeight;
    }

    console.log = (...args) => {
      addLog('log', ...args);
      originalLog.apply(console, args);
    };

    console.error = (...args) => {
      addLog('error', ...args);
      originalError.apply(console, args);
    };

    console.warn = (...args) => {
      addLog('warn', ...args);
      originalWarn.apply(console, args);
    };

    // Clear all storage
    indexedDB.databases().then(dbs => {
      dbs.forEach(db => {
        console.log('Deleting database:', db.name);
        indexedDB.deleteDatabase(db.name);
      });
    });

    localStorage.clear();
    sessionStorage.clear();

    console.log('Storage cleared, reloading in 2 seconds...');

    setTimeout(() => {
      window.location.href = 'http://localhost:5177';
    }, 2000);
  </script>
</body>
</html>
